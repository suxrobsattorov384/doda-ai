<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DODa AI — Rasm Yaratish</title>
  <link rel="stylesheet" href="style.css">
  <!-- Favicon -->
  <link rel="icon" type="image/jpeg" href="logo doda.jpg">

  <!-- Firebase SDK -->
  <script type="module">
    // Firebase konfiguratsiyasi - bu yerga o'zingizning config ma'lumotlaringizni qo'ying
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
    import { getAuth, RecaptchaVerifier, signInWithPhoneNumber, GoogleAuthProvider, signInWithPopup } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js';

    // Firebase config - Firebase Console dan olinadi
    const firebaseConfig = {
      apiKey: "AIzaSyBK0w_l1ikej-HjN46v09fP6QQzc763owo",
      authDomain: "doda-ai-app.firebaseapp.com",
      projectId: "doda-ai-app",
      storageBucket: "doda-ai-app.firebasestorage.app",
      messagingSenderId: "693170087259",
      appId: "1:693170087259:web:304f2c33f686a1e0f1a67e",
      measurementId: "G-QPZ4HB4PDW"
    };

    // Firebase ni ishga tushirish
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    
    // Global o'zgaruvchilar
    window.firebaseAuth = auth;
    window.RecaptchaVerifier = RecaptchaVerifier;
    window.signInWithPhoneNumber = signInWithPhoneNumber;
    window.GoogleAuthProvider = GoogleAuthProvider;
    window.signInWithPopup = signInWithPopup;
    
    console.log('✅ Firebase muvaffaqiyatli ishga tushdi');
    console.log('Auth object:', auth);
    console.log('GoogleAuthProvider:', GoogleAuthProvider);
    
    // Firebase tayyor ekanligini bildirish
    window.firebaseReady = true;
    document.dispatchEvent(new Event('firebaseReady'));
    
    // Test uchun
    window.testGoogleAuth = async () => {
      try {
        const provider = new GoogleAuthProvider();
        const result = await signInWithPopup(auth, provider);
        console.log('Test Google auth muvaffaqiyatli:', result.user);
      } catch (error) {
        console.error('Test Google auth xatosi:', error);
      }
    };
  </script>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: { light: '#C4B5FD', DEFAULT: '#7C3AED', dark: '#4C1D95' }
          },
          boxShadow: {
            neo: '8px 12px 30px rgba(16,24,40,0.25)'
          },
          animation: {
            'bounce-gentle': 'bounce-gentle 2s infinite',
            'float': 'float 3s ease-in-out infinite',
            'glow': 'glow 2s ease-in-out infinite alternate'
          },
          keyframes: {
            'bounce-gentle': {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-5px)' }
            },
            'float': {
              '0%, 100%': { transform: 'translateY(0px)' },
              '50%': { transform: 'translateY(-10px)' }
            },
            'glow': {
              '0%': { boxShadow: '0 0 5px rgba(59, 130, 246, 0.5)' },
              '100%': { boxShadow: '0 0 20px rgba(59, 130, 246, 0.8), 0 0 30px rgba(59, 130, 246, 0.6)' }
            }
          }
        }
      }
    }
  </script>
  
  <style>
    /* Hide video sections */
    #video-creator,
    a[href="#video-creator"] {
      display: none !important;
    }
    
    /* Custom button animations */
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes ripple {
      0% {
        transform: scale(0);
        opacity: 1;
      }
      100% {
        transform: scale(4);
        opacity: 0;
      }
    }
    
    .btn-animate {
      animation: slideDown 0.5s ease-out;
    }
    
    .btn-ripple {
      position: relative;
      overflow: hidden;
    }
    
    .btn-ripple::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }
    
    .btn-ripple:active::before {
      width: 300px;
      height: 300px;
    }
    
    /* Smooth scroll behavior */
    html {
      scroll-behavior: smooth;
    }
    
    /* Loading animation */
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    /* Dropdown scroll animation */
    @keyframes dropdownGlow {
      0% { box-shadow: 0 0 5px rgba(34, 211, 238, 0.3); }
      50% { box-shadow: 0 0 20px rgba(34, 211, 238, 0.6), 0 0 30px rgba(34, 211, 238, 0.4); }
      100% { box-shadow: 0 0 5px rgba(34, 211, 238, 0.3); }
    }
    
    .dropdown-animate {
      animation: dropdownGlow 2s ease-in-out infinite;
    }
    
    /* Enhanced Select option styling */
    select {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
      background-position: right 0.5rem center;
      background-repeat: no-repeat;
      background-size: 1.5em 1.5em;
      padding-right: 2.5rem;
    }
    
    select:focus {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2306b6d4' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    }
    
    select option {
      background-color: #0f0f0f;
      background-image: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
      color: #ffffff;
      padding: 12px 16px;
      margin: 2px 0;
      border-radius: 8px;
      font-weight: 500;
      transition: all 0.2s ease;
      border: 1px solid transparent;
    }
    
    select option:hover {
      background: linear-gradient(135deg, #22d3ee 0%, #06b6d4 100%);
      color: #000000;
      transform: translateX(4px);
      border: 1px solid #22d3ee;
      box-shadow: 0 4px 12px rgba(34, 211, 238, 0.3);
    }
    
    select option:checked {
      background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
      color: #ffffff;
      font-weight: 700;
      border: 1px solid #8b5cf6;
    }
    
    /* Custom dropdown animation */
    @keyframes dropdownSlide {
      from {
        opacity: 0;
        transform: translateY(-10px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    select:focus option {
      animation: dropdownSlide 0.3s ease-out;
    }
    
    /* Beautiful selection animations */
    @keyframes selectGlow {
      0% { 
        box-shadow: 0 0 0 0 rgba(34, 211, 238, 0.7);
        transform: scale(1);
      }
      50% { 
        box-shadow: 0 0 0 10px rgba(34, 211, 238, 0.3);
        transform: scale(1.05);
      }
      100% { 
        box-shadow: 0 0 0 20px rgba(34, 211, 238, 0);
        transform: scale(1);
      }
    }
    
    @keyframes slideInSelect {
      0% {
        opacity: 0;
        transform: translateX(-20px) scale(0.9);
      }
      50% {
        opacity: 1;
        transform: translateX(5px) scale(1.05);
      }
      100% {
        opacity: 1;
        transform: translateX(0) scale(1);
      }
    }
    
    @keyframes indicatorPop {
      0% { 
        transform: scale(1) rotate(0deg);
        opacity: 1;
      }
      25% { 
        transform: scale(0.8) rotate(-5deg);
        opacity: 0.7;
      }
      50% { 
        transform: scale(1.3) rotate(5deg);
        opacity: 1;
      }
      75% { 
        transform: scale(1.1) rotate(-2deg);
        opacity: 1;
      }
      100% { 
        transform: scale(1) rotate(0deg);
        opacity: 1;
      }
    }
    
    .size-btn-selected {
      animation: selectGlow 0.6s ease-out, slideInSelect 0.4s ease-out;
    }
    
    .indicator-animate {
      animation: indicatorPop 0.5s ease-out;
    }
    
    /* Custom Range Slider Styling */
    .slider-purple {
      background: linear-gradient(to right, #8b5cf6 0%, #8b5cf6 var(--value, 60%), rgba(255,255,255,0.1) var(--value, 60%), rgba(255,255,255,0.1) 100%);
      height: 8px;
      border-radius: 4px;
      outline: none;
    }
    
    .slider-purple::-webkit-slider-track {
      height: 8px;
      border-radius: 4px;
      background: transparent;
    }
    
    .slider-purple::-webkit-slider-thumb {
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: linear-gradient(135deg, #a855f7, #8b5cf6);
      cursor: pointer;
      border: 2px solid #ffffff;
      box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);
      transition: all 0.2s ease;
    }
    
    .slider-purple::-webkit-slider-thumb:hover {
      transform: scale(1.2);
      box-shadow: 0 6px 20px rgba(139, 92, 246, 0.6);
      background: linear-gradient(135deg, #c084fc, #a855f7);
    }
    
    .slider-purple::-webkit-slider-thumb:active {
      transform: scale(1.3);
      box-shadow: 0 8px 25px rgba(139, 92, 246, 0.8);
    }
    
    .slider-purple::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: linear-gradient(135deg, #a855f7, #8b5cf6);
      cursor: pointer;
      border: 2px solid #ffffff;
      box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);
      transition: all 0.2s ease;
    }
    
    .slider-purple::-moz-range-thumb:hover {
      transform: scale(1.2);
      box-shadow: 0 6px 20px rgba(139, 92, 246, 0.6);
      background: linear-gradient(135deg, #c084fc, #a855f7);
    }
  </style>
</head>
<body class="min-h-screen">
  <!-- SIDEBAR MENU -->
  <aside id="sidebar" class="fixed left-0 top-0 h-full w-64 sidebar-glass border-r border-white/6 z-40 transition-transform duration-300">
    <div class="flex flex-col h-full">
      <!-- Logo Section -->
      <div class="p-6 border-b border-white/6">
        <div class="flex items-center gap-3">
          <span class="text-xl font-extrabold tracking-tight neon-text">DODa AI</span>
        </div>
      </div>

      <!-- Navigation Menu -->
      <nav class="flex-1 p-4 overflow-y-auto">
        <ul class="space-y-1">
          <!-- Yaratish with dropdown -->
          <li>
            <div class="sidebar-dropdown open">
              <button class="sidebar-link sidebar-dropdown-toggle flex items-center justify-between w-full px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/8 transition-all duration-200 group">
                <div class="flex items-center gap-3">
                  <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5h2M12 7v10m-7 4h14a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                  <span class="font-medium">Yaratish</span>
                </div>
                <svg class="sidebar-dropdown-arrow w-4 h-4 transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </button>
              <ul class="sidebar-dropdown-menu mt-1 ml-4 space-y-1">
                <li><a href="#creator" class="sidebar-sublink active block px-4 py-2 rounded-lg text-sm text-white/70 hover:text-white hover:bg-white/5 transition">Rasm yaratish</a></li>
                <li><a href="https://motion-maker-50.preview.emergentagent.com/" class="sidebar-sublink block px-4 py-2 rounded-lg text-sm text-white/70 hover:text-white hover:bg-white/5 transition">Video yaratish</a></li>
              </ul>
            </div>
          </li>

          <!-- Gallery History -->
          <li>
            <a href="gallery history.html" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/8 transition-all duration-200 group">
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              <span class="font-medium">Galereya tarixi</span>
            </a>
          </li>

          <!-- Pricing -->
          <li>
            <a href="#pricing" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/8 transition-all duration-200 group">
              <svg xmlns="http://www.w3.org/2000/svg" class="sidebar-icon w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <rect x="2" y="7" width="20" height="10" rx="2" stroke-width="2" stroke="currentColor" fill="none"/>
                <path d="M2 10h20" stroke-width="2" stroke="currentColor"/>
              </svg>
              <span class="font-medium">Tariflar</span>
            </a>
          </li>
        </ul>
      </nav>

      <!-- User Section -->
      <div class="p-4 border-t border-white/6">
        <div id="sidebarUserSection" class="flex items-center gap-3 p-4 border-t border-white/10">
          <img id="sidebarUserAvatar" src="" alt="Avatar" class="w-10 h-10 rounded-full object-cover border-2 border-white/20 bg-white/10">
          <div class="flex-1">
            <div id="sidebarUserName" class="text-sm font-medium text-white">Mehmon</div>
            <div id="sidebarUserProvider" class="text-xs text-white/60">Bepul rejim</div>
          </div>
        </div>
      </div>
    </div>
  </aside>

  <!-- MOBILE SIDEBAR OVERLAY -->
  <div id="sidebarOverlay" class="sidebar-overlay"></div>

  <!-- MOBILE SIDEBAR TOGGLE -->
  <button id="sidebarToggle" class="sidebar-toggle">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
    </svg>
  </button>

  <!-- MAIN CONTENT WRAPPER -->
  <div id="mainContent" class="ml-64 transition-all duration-300">
    <!-- HEADER: Yangi Navbar -->
    <header class="sticky top-0 z-50 navbar-glass border-b border-white/6 relative overflow-hidden">
      <div class="absolute inset-0 bg-black/50"></div>
      <video class="absolute inset-0 w-full h-full object-cover opacity-20" src="video-14.mp4" autoplay muted loop></video>
      <nav class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between relative z-10">
        <div class="flex items-center gap-3">
          <a href="index.html" class="flex items-center gap-2 px-3 py-2 rounded-xl bg-white/10 hover:bg-white/20 transition text-white/80 hover:text-white">
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
            <span class="hidden sm:inline">Orqaga</span>
          </a>
        </div>
        <ul class="flex items-center gap-6">
          <li>
            <a href="#creator" class="nav-link flex items-center gap-2 text-white/80 hover:text-white transition font-medium">
              <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5h2M12 7v10m-7 4h14a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
              Yaratish
            </a>
          </li>
          <li>
            <a href="#video-creator" class="nav-link flex items-center gap-2 text-white/80 hover:text-white transition font-medium">
              <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
              Video yaratish
            </a>
          </li>
            <a href="#pricing" class="nav-link flex items-center gap-2 text-white/80 hover:text-white transition font-medium">
              <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><rect x="2" y="7" width="20" height="10" rx="2" stroke-width="2" stroke="currentColor" fill="none"/><path d="M2 10h20" stroke-width="2" stroke="currentColor"/></svg>
              Tariflar
            </a>
          </li>
        </ul>
        <div class="flex items-center gap-2">
          <!-- Kirish tugmasi (foydalanuvchi kirmagan bo'lsa) -->
          <button id="btnOpenAuthHeader" class="nav-link flex items-center gap-2 px-4 py-2 rounded-xl bg-white/10 hover:bg-white/20 text-sm font-semibold transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 11-4 0 2 2 0 014 0zm-7 7a7 7 0 1114 0c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2z" /></svg>
            Kirish
          </button>
          
          <!-- Foydalanuvchi profili (kirgan bo'lsa) -->
          <div id="userProfile" class="hidden flex items-center gap-3">
            <div class="flex items-center gap-2 px-3 py-2 rounded-xl bg-white/10">
              <img id="userAvatar" src="" alt="Avatar" class="w-8 h-8 rounded-full object-cover border-2 border-white/20">
              <div class="flex flex-col">
                <span id="userName" class="text-sm font-semibold text-white">Foydalanuvchi</span>
                <span id="userProvider" class="text-xs text-white/60">Google</span>
              </div>
            </div>
            <button id="btnLogoutHeader" class="nav-link flex items-center gap-2 px-3 py-2 rounded-xl bg-red-500/20 hover:bg-red-500/30 text-red-300 text-sm font-semibold transition">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-6 0V7a3 3 0 016 0v1" /></svg>
              Chiqish
            </button>
          </div>
        </div>
      </nav>
    </header>

    <!-- HERO -->
    <section class="relative py-20">
      <div class="max-w-6xl mx-auto px-6 text-center">
        <h1 class="text-4xl md:text-6xl font-extrabold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-cyan-300 to-purple-300">
          Video va Rasm Yaratish
        </h1>
        <p class="text-white/70 max-w-2xl mx-auto mb-8">AI yordamida tez va oson video va rasm yarating.</p>
      </div>
    </section>

    <!-- CREATOR SECTION -->
    <section id="creatorSection" class="max-w-7xl mx-auto px-6 py-12">
      <div class="glass rounded-2xl p-6">
        <div class="flex flex-col gap-8">
          <!-- Main Prompt Section - Full Width -->
          <div class="w-full">
            <h2 class="text-2xl font-bold text-white mb-6 text-center"> AI Rasm Yaratish</h2>
            
            <!-- Large Prompt Area -->
            <div class="mb-6">
              <label class="block text-lg font-medium text-white/90 mb-4">Tasvirlang - AI sizning g'oyangizni rasm qiladi</label>
              <textarea id="prompt" class="w-full rounded-2xl bg-black/20 border border-white/10 p-6 text-white placeholder-white/50 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/20 transition-all duration-200 resize-none shadow-lg text-lg leading-relaxed" rows="6" placeholder="Masalan: Chiroyli tog' manzarasi, quyosh botishi, bulutli osmon, tabiat go'zalligi, rangbarang gullar, kristal tiniq suv...

Batafsil tasvirlab yozing - qanchalik ko'p detallar bersangiz, shunchalik yaxshi rasm chiqadi!"></textarea>
              <div class="flex items-center justify-between mt-3">
                <div class="text-sm text-white/60">💡 Maslahat: O'zbekcha yoki inglizcha yozishingiz mumkin</div>
                <div class="text-sm text-white/70 bg-white/10 px-3 py-1 rounded-lg">
                  Belgilar: <span id="count" class="font-semibold text-cyan-400">0</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Settings Section - 2 Column Layout -->
          <div class="grid md:grid-cols-2 gap-8">
            <!-- File Upload Section -->
            <div class="space-y-6">
              <div>
                <label class="flex items-center gap-2 text-lg font-medium text-white/90 mb-4">
                  <svg class="w-5 h-5 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                  Rasm Yuklash <span class="text-white/50 text-sm font-normal">(ixtiyoriy)</span>
                </label>
                <div id="fileDrop" class="relative w-full min-h-40 border-2 border-dashed border-white/15 rounded-2xl flex items-center justify-center cursor-pointer hover:border-green-400 hover:bg-gradient-to-br hover:from-green-400/5 hover:to-cyan-400/5 transition-all duration-300 group bg-gradient-to-br from-black/20 to-black/10 backdrop-blur-sm">
                  <div class="text-center p-6">
                    <div class="relative mb-4">
                      <svg class="w-12 h-12 text-white/50 group-hover:text-green-400 mx-auto transition-all duration-300 group-hover:scale-110" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                      </svg>
                      <div class="absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-green-400 to-cyan-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-pulse"></div>
                    </div>
                    <div class="text-base text-white/70 group-hover:text-white font-medium mb-2">📸 Rasm faylni shu yerga torting</div>
                    <div class="text-sm text-white/50 group-hover:text-white/70 mb-3">yoki <span class="text-green-400 font-medium">bosib tanlang</span></div>
                    <div id="fileName" class="text-sm text-white/40 bg-white/5 px-3 py-2 rounded-xl inline-block">Fayl tanlanmagan</div>
                  </div>
                </div>
                <input id="file" type="file" accept="image/*" class="hidden">
                <div class="mt-3 text-xs text-white/50 text-center">
                  💡 JPG, PNG, WEBP formatlarini qo'llab-quvvatlaymiz
                </div>
              </div>
            </div>
            
            <!-- Image Size Section -->
            <div class="space-y-6" id="creator">
              <div>
                <label class="flex items-center gap-2 text-lg font-medium text-white/90 mb-4">
                  <svg class="w-5 h-5 text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4a1 1 0 011-1h4m0 0l-3 3m3-3v3m6 0V4a1 1 0 011-1h4m0 0l-3 3m3-3v3m0 6v4a1 1 0 01-1 1h-4m0 0l3-3m-3 3h-3m-6 0v4a1 1 0 01-1 1H4m0 0l3-3m-3 3h3" />
                  </svg>
                  Rasm O'lchami
                </label>
                <div class="relative">
                  <!-- Main dropdown button -->
                  <button id="imageSizeDropdown" class="w-full p-4 rounded-2xl bg-gradient-to-br from-black/30 to-black/20 border border-white/10 text-white hover:border-purple-400 hover:bg-white/5 transition-all duration-300 flex items-center justify-between group shadow-lg backdrop-blur-sm">
                    <div class="flex items-center gap-4">
                      <div class="w-8 h-8 bg-gradient-to-br from-purple-400 to-cyan-400 rounded-lg shadow-lg flex items-center justify-center">
                        <svg class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4a1 1 0 011-1h4m0 0l-3 3m3-3v3m6 0V4a1 1 0 011-1h4m0 0l-3 3m-3 3v3m0 6v4a1 1 0 01-1 1h-4m0 0l3-3m-3 3h-3m-6 0v4a1 1 0 01-1 1H4m0 0l3-3m-3 3h3" />
                        </svg>
                      </div>
                      <div class="text-left">
                        <div class="text-base font-semibold" id="selectedSizeText">1024×1024</div>
                        <div class="text-sm text-white/70" id="selectedSizeDesc">Katta - Kvadrat ⭐</div>
                      </div>
                    </div>
                    <svg class="w-5 h-5 text-white/60 group-hover:text-cyan-400 transition-all duration-300 transform" id="dropdownArrow" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                  </button>
                  
                  <!-- Dropdown options -->
                  <div id="imageSizeOptions" class="absolute top-full left-0 right-0 mt-2 bg-black/90 backdrop-blur-sm border border-white/10 rounded-xl shadow-2xl z-50 hidden">
                    <div class="p-2 space-y-1">
                      <button class="size-option w-full p-3 rounded-lg hover:bg-cyan-500/10 hover:border-cyan-400/50 border border-transparent text-left transition-all duration-200 group" data-size="512x512" data-desc="Kichik - Kvadrat">
                        <div class="flex items-center gap-3">
                          <div class="w-4 h-4 border border-white/30 rounded group-hover:border-cyan-400 transition-colors"></div>
                          <div>
                            <div class="text-sm font-medium text-white">512×512</div>
                            <div class="text-xs text-white/60">Kichik - Kvadrat</div>
                          </div>
                        </div>
                      </button>
                      <button class="size-option w-full p-3 rounded-lg hover:bg-cyan-500/10 hover:border-cyan-400/50 border border-transparent text-left transition-all duration-200 group" data-size="768x768" data-desc="O'rta - Kvadrat">
                        <div class="flex items-center gap-3">
                          <div class="w-5 h-5 border border-white/30 rounded group-hover:border-cyan-400 transition-colors"></div>
                          <div>
                            <div class="text-sm font-medium text-white">768×768</div>
                            <div class="text-xs text-white/60">O'rta - Kvadrat</div>
                          </div>
                        </div>
                      </button>
                      <button class="size-option w-full p-3 rounded-lg bg-cyan-500/20 border-cyan-400/50 border text-left transition-all duration-200 group active" data-size="1024x1024" data-desc="Katta - Kvadrat">
                        <div class="flex items-center gap-3">
                          <div class="w-6 h-6 bg-cyan-400 rounded shadow-sm"></div>
                          <div>
                            <div class="text-sm font-medium text-white">1024×1024</div>
                            <div class="text-xs text-cyan-300">Katta - Kvadrat ⭐</div>
                          </div>
                        </div>
                      </button>
                      <button class="size-option w-full p-3 rounded-lg hover:bg-cyan-500/10 hover:border-cyan-400/50 border border-transparent text-left transition-all duration-200 group" data-size="1024x768" data-desc="Landshaft">
                        <div class="flex items-center gap-3">
                          <div class="w-6 h-4 border border-white/30 rounded group-hover:border-cyan-400 transition-colors"></div>
                          <div>
                            <div class="text-sm font-medium text-white">1024×768</div>
                            <div class="text-xs text-white/60">Landshaft</div>
                          </div>
                        </div>
                      </button>
                      <button class="size-option w-full p-3 rounded-lg hover:bg-cyan-500/10 hover:border-cyan-400/50 border border-transparent text-left transition-all duration-200 group" data-size="768x1024" data-desc="Portret">
                        <div class="flex items-center gap-3">
                          <div class="w-4 h-6 border border-white/30 rounded group-hover:border-cyan-400 transition-colors"></div>
                          <div>
                            <div class="text-sm font-medium text-white">768×1024</div>
                            <div class="text-xs text-white/60">Portret</div>
                          </div>
                        </div>
                      </button>
                      <button class="size-option w-full p-3 rounded-lg hover:bg-cyan-500/10 hover:border-cyan-400/50 border border-transparent text-left transition-all duration-200 group" data-size="1920x1080" data-desc="Full HD">
                        <div class="flex items-center gap-3">
                          <div class="w-7 h-4 border border-white/30 rounded group-hover:border-cyan-400 transition-colors"></div>
                          <div>
                            <div class="text-sm font-medium text-white">1920×1080</div>
                            <div class="text-xs text-white/60">Full HD</div>
                          </div>
                        </div>
                      </button>
                    </div>
                  </div>
                </div>
                <input type="hidden" id="imageSize" value="1024x1024">
              </div>
            </div>
          </div>
          
          <!-- Generate Button - Full Width -->
          <div class="w-full flex justify-center">
            <button id="genImage" class="btn-grad btn-ripple btn-animate px-12 py-4 rounded-2xl font-bold transform hover:scale-105 hover:-translate-y-1 transition-all duration-300 shadow-lg hover:shadow-xl relative overflow-hidden group bg-gradient-to-r from-cyan-500 to-purple-500 text-white text-lg">
              <span class="relative z-10 flex items-center gap-3">
                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
                 AI Rasm Yaratish
              </span>
              <div class="absolute inset-0 bg-gradient-to-r from-cyan-600 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            </button>
          </div>

            <!-- Video Creator -->
            <div id="video-creator" class="space-y-4">
              <h3 class="text-xl font-semibold text-white">Video Yaratish</h3>
              <div>
                <label class="block text-sm text-white/70 mb-2">Prompt</label>
                <textarea id="videoPrompt" class="w-full rounded-xl bg-black/20 border border-white/10 p-4 text-white placeholder-white/50 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/20 transition-all duration-200 resize-none shadow-lg" rows="4" placeholder="Masalan: Harakatlanuvchi tabiat manzarasi..."></textarea>
                <div class="text-xs text-white/60 mt-1">Belgilar soni: <span id="videoCount">0</span></div>
              </div>
              <div>
                <label class="block text-sm text-white/70 mb-2">Javob tili</label>
                <select id="videoResponseLanguage" class="w-full p-3 rounded-xl bg-black/20 border border-white/10 text-white hover:border-cyan-400 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/20 transition-all duration-200">
                  <option value="uzbek" selected>O'zbek tili</option>
                  <option value="english">Ingliz tili</option>
                  <option value="russian">Rus tili</option>
                </select>
              </div>
              <div>
                <label class="block text-sm text-white/70 mb-2">Video yuklash (ixtiyoriy)</label>
                <div id="videoFileDrop" class="w-full min-h-32 border-2 border-dashed border-white/20 rounded-xl flex items-center justify-center cursor-pointer hover:border-cyan-400 hover:bg-white/5 transition-all duration-200 group">
                  <div class="text-center">
                    <svg class="w-8 h-8 text-white/60 group-hover:text-cyan-400 mx-auto mb-2 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                    </svg>
                    <div class="text-sm text-white/60 group-hover:text-white">Video faylni bu yerga torting yoki bosing</div>
                    <div id="videoFileName" class="text-xs text-white/40">Fayl tanlanmagan</div>
                  </div>
                </div>
                <input id="videoFile" type="file" accept="video/*" class="hidden">
              </div>
              <div>
                <label class="block text-sm text-white/70 mb-2">Davomiyligi</label>
                <div class="flex items-center gap-4 p-4 rounded-xl bg-black/10 border border-white/5 hover:border-purple-400/30 transition-all duration-300 group">
                  <div class="flex-1 relative">
                    <input id="videoSec" type="range" min="5" max="10" value="8" class="w-full appearance-none cursor-pointer slider-purple">
                    <div class="flex justify-between text-xs text-white/40 mt-1">
                      <span>5s</span>
                      <span>7s</span>
                      <span>10s</span>
                    </div>
                  </div>
                  <div class="flex items-center gap-2">
                    <span class="text-xs text-white/60">⏱️</span>
                    <span id="videoSecVal" class="text-sm font-semibold text-white bg-purple-500/20 px-2 py-1 rounded-lg border border-purple-500/30 min-w-[3rem] text-center">8s</span>
                  </div>
                </div>
              </div>
              <button id="genVideo" class="btn-grad btn-ripple btn-animate w-full px-4 py-3 rounded-xl font-semibold transform hover:scale-105 hover:-translate-y-1 transition-all duration-300 shadow-lg hover:shadow-xl relative overflow-hidden group">
                <span class="relative z-10">Video Yaratish</span>
                <div class="absolute inset-0 bg-gradient-to-r from-purple-600 to-pink-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </button>
            </div>
          </div>

          <!-- Preview Area at Bottom -->
          <div class="mt-8">
            <div class="flex items-center justify-between mb-6">
              <h3 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-300 to-purple-300">Natija</h3>
              <div class="flex items-center gap-2 text-sm text-white/60">
                <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                <span>AI tayyor</span>
              </div>
            </div>
            
            <!-- Large Preview Container -->
            <div class="glass rounded-2xl p-4 mb-6">
              <div id="preview" class="w-full min-h-80 bg-gradient-to-br from-gray-900/80 to-gray-800/80 rounded-xl flex items-center justify-center text-white/60 border border-white/10 overflow-hidden relative group transition-all duration-300">
                <div class="absolute inset-0 bg-gradient-to-br from-cyan-500/5 to-purple-500/5"></div>
                <div class="relative z-10 text-center">
                  <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-cyan-500/20 to-purple-500/20 rounded-full flex items-center justify-center">
                    <svg class="w-8 h-8 text-cyan-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                  </div>
                  <div class="text-lg font-medium mb-2">AI Yaratish Zonasi</div>
                  <div class="text-sm text-white/50">Prompt yozing va yaratish tugmasini bosing</div>
                </div>
                <video src="aivideo.mp4" class="absolute inset-0 w-full h-full object-cover rounded-xl opacity-20 group-hover:opacity-30 transition-opacity" autoplay muted loop></video>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-wrap gap-3 justify-center">
              <button id="downloadBtn" class="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500/20 to-emerald-500/20 hover:from-green-500/30 hover:to-emerald-500/30 border border-green-500/30 rounded-xl text-green-400 font-medium transform hover:scale-110 hover:-translate-y-2 transition-all duration-300 shadow-lg hover:shadow-green-500/25 relative overflow-hidden group">
                <svg class="w-5 h-5 transform group-hover:rotate-12 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                <span class="relative z-10">Yuklab olish</span>
                <div class="absolute inset-0 bg-gradient-to-r from-green-400/20 to-emerald-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-pulse"></div>
              </button>
              
              <button id="regenerateBtn" class="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500/20 to-pink-500/20 hover:from-purple-500/30 hover:to-pink-500/30 border border-purple-500/30 rounded-xl text-purple-400 font-medium transform hover:scale-110 hover:-translate-y-2 transition-all duration-300 shadow-lg hover:shadow-purple-500/25 relative overflow-hidden group">
                <svg class="w-5 h-5 transform group-hover:rotate-180 transition-transform duration-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
                <span class="relative z-10">Qayta yaratish</span>
                <div class="absolute inset-0 bg-gradient-to-r from-purple-400/20 to-pink-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-pulse"></div>
              </button>
              
              <button id="enlargeBtn" class="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500/20 to-red-500/20 hover:from-orange-500/30 hover:to-red-500/30 border border-orange-500/30 rounded-xl text-orange-400 font-medium transform hover:scale-110 hover:-translate-y-2 transition-all duration-300 shadow-lg hover:shadow-orange-500/25 relative overflow-hidden group">
                <svg class="w-5 h-5 transform group-hover:scale-125 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7" />
                </svg>
                <span class="relative z-10">Katta ko'rish</span>
                <div class="absolute inset-0 bg-gradient-to-r from-orange-400/20 to-red-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-pulse"></div>
              </button>
            </div>

            <!-- Generation Info -->
            <div id="generationInfo" class="mt-4 text-center text-sm text-white/50 hidden">
              <div class="flex items-center justify-center gap-4">
                <span id="generationTime">Vaqt: --</span>
                <span id="generationProvider">Provider: --</span>
                <span id="generationSize">Hajm: --</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PRICING SECTION -->
    <section id="pricing" class="max-w-7xl mx-auto px-6 py-12">
      <div class="flex items-center justify-between mb-8">
        <h2 class="text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-cyan-300 to-purple-300">Tariflar</h2>

        <!-- Switch w/ indicator -->
        <div class="pill relative rounded-full bg-white/3 flex w-[200px] p-1">
          <span id="sliderIndicator" class="absolute top-1 left-1 h-9 w-[96px] rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 transition-transform duration-300 ease-in-out"></span>
          <button id="tabMonthly" class="relative z-10 flex-1 px-4 py-2 rounded-full text-sm font-medium text-white text-center">Oylik</button>
          <button id="tabYearly" class="relative z-10 flex-1 px-4 py-2 rounded-full text-sm font-medium text-white/70 text-center">Yillik</button>
        </div>
      </div>

      <!-- Monthly -->
      <div id="monthly" class="grid md:grid-cols-3 gap-6">
        <!-- Pro -->
        <div class="relative group glass rounded-2xl p-6 hover:scale-[1.03] hover:shadow-[0_0_30px_rgba(99,102,241,0.12)] transition-transform duration-300 overflow-hidden">
          <span class="absolute inset-0 rounded-2xl bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 opacity-0 group-hover:opacity-60 blur-md transition-opacity duration-500"></span>
          <div class="relative z-10">
            <div class="flex items-baseline gap-2">
              <div class="text-xl font-semibold">Started</div>
              <div class="text-white/60 text-sm">Oylik</div>
            </div>
            <div class="mt-3 text-4xl font-extrabold">$8<span class="text-sm text-white/60">/mo</span></div>
            <ul class="mt-5 space-y-2 text-sm text-white/80">
              <li>54 kredit/oy</li>
              <li>54 ta rasm yaratish</li>
              <li>10 ta video yaratish</li>
            </ul>
            <div class="mt-6 grid grid-cols-2 gap-3">
              <button class="btn-grad px-4 py-2 rounded-xl font-semibold subscribe-btn" data-plan="pro-monthly" data-link="https://buy.stripe.com/test_eVq9ASgVm5ah0861a5gYU00">Oylik obuna</button>
              <button class="px-4 py-2 rounded-xl border border-white/10 bg-white/6 hover:bg-white/8 font-semibold subscribe-btn" data-plan="pro-yearly" data-link="https://buy.stripe.com/test_8x214mbB28mtdYW061gYU04">Yillik (chegirma)</button>
            </div>
          </div>
        </div>

        <!-- Ultra -->
        <div class="relative group glass rounded-2xl p-6 hover:scale-[1.03] hover:shadow-[0_0_30px_rgba(99,102,241,0.12)] transition-transform duration-300 overflow-hidden">
          <span class="absolute inset-0 rounded-2xl bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 opacity-0 group-hover:opacity-60 blur-md transition-opacity duration-500"></span>
          <div class="relative z-10">
            <div class="flex items-baseline gap-2">
              <div class="text-xl font-semibold">Pro</div>
              <div class="text-white/60 text-sm">Oylik</div>
            </div>
            <div class="mt-3 text-4xl font-extrabold">$16<span class="text-sm text-white/60">/mo</span></div>
            <ul class="mt-5 space-y-2 text-sm text-white/80">
              <li>108 kredit/oy</li>
              <li>108 ta rasm yaratish</li>
              <li>21 ta video yaratish</li>
            </ul>
            <div class="mt-6 grid grid-cols-2 gap-3">
              <button class="btn-grad px-4 py-2 rounded-xl font-semibold subscribe-btn" data-plan="ultra-monthly" data-link="https://buy.stripe.com/test_6oUcN46gI8mt4ombOJgYU01">Oylik obuna</button>
              <button class="px-4 py-2 rounded-xl border border-white/10 bg-white/6 hover:bg-white/8 font-semibold subscribe-btn" data-plan="ultra-yearly" data-link="https://buy.stripe.com/test_cNi3cu48AbyF4omf0VgYU05">Yillik (chegirma)</button>
            </div>
          </div>
        </div>

        <!-- Cheksiz -->
        <div class="relative group glass rounded-2xl p-6 hover:scale-[1.03] hover:shadow-[0_0_30px_rgba(99,102,241,0.12)] transition-transform duration-300 overflow-hidden">
          <span class="absolute inset-0 rounded-2xl bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 opacity-0 group-hover:opacity-60 blur-md transition-opacity duration-500"></span>
          <div class="relative z-10">
            <div class="flex items-baseline gap-2">
              <div class="text-xl font-semibold">Studio</div>
              <div class="text-white/60 text-sm">Oylik</div>
            </div>
            <div class="mt-3 text-4xl font-extrabold">$40<span class="text-sm text-white/60">/mo</span></div>
            <ul class="mt-5 space-y-2 text-sm text-white/80">
              <li>269 kredit/oy</li>
              <li>269 ta rasm yaratish</li>
              <li>53 ta video yaratish</li>
            </ul>
            <div class="mt-6 grid grid-cols-2 gap-3">
              <button class="btn-grad px-4 py-2 rounded-xl font-semibold subscribe-btn" data-plan="unlimited-monthly" data-link="https://buy.stripe.com/test_4gMbJ08oQfOV6wuaKFgYU02">Oylik obuna</button>
              <button class="px-4 py-2 rounded-xl border border-white/10 bg-white/6 hover:bg-white/8 font-semibold subscribe-btn" data-plan="unlimited-yearly" data-link="https://buy.stripe.com/test_8x2cN47kMfOVg74dWRgYU06">Yillik (chegirma)</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Yearly -->
      <div id="yearly" class="grid md:grid-cols-3 gap-6 hidden mt-6">
        <!-- Pro yearly -->
        <div class="relative group glass rounded-2xl p-6 hover:scale-[1.03] hover:shadow-[0_0_30px_rgba(99,102,241,0.12)] transition-transform duration-300 overflow-hidden">
          <span class="absolute inset-0 rounded-2xl bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 opacity-0 group-hover:opacity-60 blur-md transition-opacity duration-500"></span>
          <div class="relative z-10">
            <div class="flex items-baseline gap-2">
              <div class="text-xl font-semibold">Pro</div>
              <div class="text-white/60 text-sm">Yillik</div>
            </div>
            <div class="mt-3 text-4xl font-extrabold">$80<span class="text-sm text-white/60">/yil</span></div>
            <ul class="mt-5 space-y-2 text-sm text-white/80">
              <li>538 kredit/yil</li>
              <li>538 ta rasm yaratish</li>
              <li>107 ta video yaratish</li>
            </ul>
            <div class="mt-6">
              <button class="btn-grad w-full px-4 py-2 rounded-xl font-semibold subscribe-btn" data-plan="pro-yearly" data-link="https://buy.stripe.com/test_8x214mbB28mtdYW061gYU04">Yillik obuna</button>
            </div>
          </div>
        </div>

        <!-- Ultra yearly -->
        <div class="relative group glass rounded-2xl p-6 hover:scale-[1.03] hover:shadow-[0_0_30px_rgba(99,102,241,0.12)] transition-transform duration-300 overflow-hidden">
          <span class="absolute inset-0 rounded-2xl bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 opacity-0 group-hover:opacity-60 blur-md transition-opacity duration-500"></span>
          <div class="relative z-10">
            <div class="flex items-baseline gap-2">
              <div class="text-xl font-semibold">Ultra</div>
              <div class="text-white/60 text-sm">Yillik</div>
            </div>
            <div class="mt-3 text-4xl font-extrabold">$150<span class="text-sm text-white/60">/yil</span></div>
            <ul class="mt-5 space-y-2 text-sm text-white/80">
              <li>1008 kredit/yil</li>
              <li>1008 ta rasm yaratish</li>
              <li>201 ta video yaratish</li>
            </ul>
            <div class="mt-6">
              <button class="btn-grad w-full px-4 py-2 rounded-xl font-semibold subscribe-btn" data-plan="ultra-yearly" data-link="https://buy.stripe.com/test_cNi3cu48AbyF4omf0VgYU05">Yillik obuna</button>
            </div>
          </div>
        </div>

        <!-- Cheksiz yearly -->
        <div class="relative group glass rounded-2xl p-6 hover:scale-[1.03] hover:shadow-[0_0_30px_rgba(99,102,241,0.12)] transition-transform duration-300 overflow-hidden">
          <span class="absolute inset-0 rounded-2xl bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 opacity-0 group-hover:opacity-60 blur-md transition-opacity duration-500"></span>
          <div class="relative z-10">
            <div class="flex items-baseline gap-2">
              <div class="text-xl font-semibold">Cheksiz</div>
              <div class="text-white/60 text-sm">Yillik</div>
            </div>
            <div class="mt-3 text-4xl font-extrabold">$450<span class="text-sm text-white/60">/yil</span></div>
            <ul class="mt-5 space-y-2 text-sm text-white/80">
              <li>3023 kredit/yil</li>
              <li>3023 ta rasm yaratish</li>
              <li>604 ta video yaratish</li>
            </ul>
            <div class="mt-6">
              <button class="btn-grad w-full px-4 py-2 rounded-xl font-semibold subscribe-btn" data-plan="unlimited-yearly" data-link="https://buy.stripe.com/test_8x2cN47kMfOVg74dWRgYU06">Yillik obuna</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="py-8">
      <div class="max-w-7xl mx-auto px-6 text-center text-white/60">
        © <span id="y"></span> DODa — AI · Video va Rasm Yaratish Sahifasi. Barcha huquqlar himoyalangan.
      </div>
    </footer>
  </div>

  <!-- AUTH MODAL -->
  <div id="authOverlay" class="fixed inset-0 bg-black/60 hidden z-50"></div>
  <div id="authModal" class="fixed inset-0 grid place-items-center pointer-events-none z-50">
    <div class="w-[92%] max-w-md glass rounded-2xl p-6 pointer-events-auto hidden" id="authCard">
      <div class="flex items-center justify-between mb-3">
        <div class="text-lg font-bold">Kirish / Ro'yxatdan o'tish</div>
        <button id="btnCloseAuth" class="text-white/70 hover:text-white">✕</button>
      </div>

      <div class="pill rounded-xl p-1 grid grid-cols-3 mb-4">
        <button id="tabLogin" class="px-3 py-1.5 rounded-lg bg-white/8 text-xs">Google</button>
        <button id="tabPhoneLogin" class="px-3 py-1.5 rounded-lg text-xs">Telefon</button>
        <button id="tabRegister" class="px-3 py-1.5 rounded-lg text-xs">Ro'yxat</button>
      </div>

      <!-- Google Login -->
      <div id="googleLogin" class="space-y-3">
        <button id="googleSignInBtn" type="button" class="w-full flex items-center justify-center gap-3 px-4 py-3 rounded-xl bg-white text-gray-800 font-semibold hover:bg-gray-50 transition-all duration-200 shadow-lg">
          <svg class="w-5 h-5" viewBox="0 0 24 24">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Google orqali kirish
        </button>
        <div id="googleLoginError" class="hidden text-red-400 text-sm text-center"></div>
      </div>

      <!-- Phone Login -->
      <form id="formPhoneLogin" class="space-y-3 hidden">
        <div>
          <label class="text-xs text-white/70">Telefon raqami</label>
          <div class="relative">
            <input id="phoneNumber" type="tel" class="w-full mt-1 rounded-xl bg-black/20 border border-white/6 p-3 pl-4" placeholder="+998 90 123 45 67" required>
            <div id="countryFlag" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-sm text-white/70"></div>
          </div>
          <div id="countryName" class="text-xs text-blue-400 mt-1 hidden"></div>
        </div>
        <div id="recaptcha-container" class="mt-3 flex justify-center"></div>
        <div id="smsCodeSection" class="hidden">
          <label class="text-xs text-white/70">SMS kod</label>
          <input id="smsCode" type="text" maxlength="6" class="w-full mt-1 rounded-xl bg-black/20 border border-white/6 p-3 text-center text-lg tracking-widest" placeholder="123456">
          <div class="text-xs text-white/50 mt-1 text-center">
            Kod yuborildi. <span id="resendTimer" class="text-blue-400"></span>
          </div>
        </div>
        <div id="phoneLoginError" class="hidden text-red-400 text-sm"></div>
        <button type="submit" id="phoneLoginBtn" class="btn-grad relative z-0 w-full mt-1 px-4 py-2 rounded-xl border border-white/10 font-semibold">SMS yuborish</button>
      </form>

      <!-- Register -->
      <form id="formRegister" class="space-y-3 hidden">
        <div>
          <label class="text-xs text-white/70">Ism</label>
          <input id="regName" type="text" class="w-full mt-1 rounded-xl bg-black/20 border border-white/6 p-3" placeholder="Ismingiz" required>
        </div>
        <div>
          <label class="text-xs text-white/70">Email</label>
          <input id="regEmail" type="email" class="w-full mt-1 rounded-xl bg-black/20 border border-white/6 p-3" placeholder="you@email.com" required>
        </div>
        <div>
          <label class="text-xs text-white/70">Parol (kamida 6 belgidan)</label>
          <input id="regPassword" minlength="6" type="password" class="w-full mt-1 rounded-xl bg-black/20 border border-white/6 p-3" placeholder="••••••••" required>
        </div>
        <div id="regError" class="hidden text-red-400 text-sm"></div>
        <button type="submit" class="btn-grad relative z-0 w-full mt-1 px-4 py-2 rounded-xl border border-white/10 font-semibold">Ro'yxatdan o'tish</button>
      </form>
    </div>
  </div>

  <!-- ZOOM MODAL -->
  <div id="zoomOverlay" class="fixed inset-0 bg-black/90 hidden z-50 flex items-center justify-center">
    <div class="relative max-w-[95vw] max-h-[95vh] w-full h-full flex items-center justify-center">
      <button id="closeZoom" class="absolute top-4 right-4 z-10 w-10 h-10 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center text-white transition-all duration-200">
        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
      <div id="zoomContent" class="max-w-full max-h-full flex items-center justify-center">
        <!-- Zoomed content will be inserted here -->
      </div>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script>
// Year in footer
document.getElementById('y').textContent = new Date().getFullYear();

/* ---------- small utilities ---------- */
const $ = (q, root=document) => root.querySelector(q);
const $$ = (q, root=document) => Array.from(root.querySelectorAll(q));
const show = el => el && el.classList.remove('hidden');
const hide = el => el && el.classList.add('hidden');

/* ---------- Prompt counter & sec range ---------- */
const promptEl = $('#prompt');
const countEl = $('#count');
promptEl?.addEventListener('input', ()=> { countEl.textContent = promptEl.value.length; });

// Video prompt counter
const videoPromptEl = $('#videoPrompt');
const videoCountEl = $('#videoCount');
videoPromptEl?.addEventListener('input', ()=> { videoCountEl.textContent = videoPromptEl.value.length; });

const sec = $('#sec');
const secVal = $('#secVal');
sec?.addEventListener('input', ()=> { secVal.textContent = sec.value + 's'; });

const videoSec = $('#videoSec');
const videoSecVal = $('#videoSecVal');

// Initialize slider progress on page load
if (videoSec) {
  const initialValue = videoSec.value;
  const initialPercentage = ((initialValue - 5) / (10 - 5)) * 100;
  videoSec.style.setProperty('--value', initialPercentage + '%');
}

videoSec?.addEventListener('input', (e)=> { 
  const value = e.target.value;
  videoSecVal.textContent = value + 's';
  
  // Update slider progress
  const percentage = ((value - 5) / (10 - 5)) * 100;
  e.target.style.setProperty('--value', percentage + '%');
  
  // Add glow animation to duration display
  videoSecVal.classList.add('animate-pulse');
  setTimeout(() => {
    videoSecVal.classList.remove('animate-pulse');
  }, 500);
});

// Video duration slider animation
videoSec?.addEventListener('change', (e) => {
  // Smooth scroll to generation button
  const genButton = $('#genVideo');
  genButton.scrollIntoView({ 
    behavior: 'smooth', 
    block: 'center' 
  });
  
  // Add temporary highlight to generation button
  genButton.classList.add('animate-bounce-gentle');
  
  // Remove animation after delay
  setTimeout(() => {
    genButton.classList.remove('animate-bounce-gentle');
  }, 2000);
  
  // Show selected duration info
  console.log(`🎬 Video davomiyligi tanlandi: ${e.target.value} soniya`);
});

// Image size dropdown functionality
const imageSizeDropdown = $('#imageSizeDropdown');
const imageSizeOptions = $('#imageSizeOptions');
const dropdownArrow = $('#dropdownArrow');
const selectedSizeText = $('#selectedSizeText');
const selectedSizeDesc = $('#selectedSizeDesc');
const imageSizeInput = $('#imageSize');
const sizeOptions = $$('.size-option');

// Toggle dropdown
imageSizeDropdown?.addEventListener('click', (e) => {
  e.preventDefault();
  const isOpen = !imageSizeOptions.classList.contains('hidden');
  
  if (isOpen) {
    // Close dropdown
    imageSizeOptions.classList.add('hidden');
    dropdownArrow.style.transform = 'rotate(0deg)';
  } else {
    // Open dropdown with animation
    imageSizeOptions.classList.remove('hidden');
    dropdownArrow.style.transform = 'rotate(180deg)';
    
    // Smooth scroll to show dropdown
    setTimeout(() => {
      imageSizeOptions.scrollIntoView({ 
        behavior: 'smooth', 
        block: 'nearest' 
      });
    }, 100);
  }
});

// Handle option selection
sizeOptions.forEach(option => {
  option.addEventListener('click', (e) => {
    e.preventDefault();
    
    // Remove active class from all options
    sizeOptions.forEach(opt => {
      opt.classList.remove('active', 'bg-cyan-500/20', 'border-cyan-400/50');
      opt.classList.add('border-transparent');
      
      // Reset indicators
      const indicator = opt.querySelector('div:first-child > div:first-child');
      indicator.classList.remove('bg-cyan-400', 'shadow-sm');
      indicator.classList.add('border', 'border-white/30');
      
      // Reset text colors
      const desc = opt.querySelector('.text-xs');
      desc.classList.remove('text-cyan-300');
      desc.classList.add('text-white/60');
    });
    
    // Add active class to selected option
    option.classList.add('active', 'bg-cyan-500/20', 'border-cyan-400/50');
    option.classList.remove('border-transparent');
    
    // Update indicator
    const indicator = option.querySelector('div:first-child > div:first-child');
    indicator.classList.add('bg-cyan-400', 'shadow-sm');
    indicator.classList.remove('border', 'border-white/30');
    
    // Update text color
    const desc = option.querySelector('.text-xs');
    desc.classList.add('text-cyan-300');
    desc.classList.remove('text-white/60');
    
    // Update main button display
    const size = option.dataset.size;
    const description = option.dataset.desc;
    selectedSizeText.textContent = size;
    selectedSizeDesc.textContent = description;
    imageSizeInput.value = size;
    
    // Debug: Confirm the value is set
    console.log(`📐 O'lcham tanlandi: ${imageSizeInput.value}`);
    
    // Update main button indicator size
    const mainIndicator = imageSizeDropdown.querySelector('div:first-child > div:first-child');
    const [width, height] = size.split('x');
    const ratio = Math.min(parseInt(width), parseInt(height)) / Math.max(parseInt(width), parseInt(height));
    
    if (width === height) {
      // Square
      mainIndicator.className = 'w-6 h-6 bg-cyan-400 rounded shadow-sm';
    } else if (parseInt(width) > parseInt(height)) {
      // Landscape
      mainIndicator.className = 'w-7 h-4 bg-cyan-400 rounded shadow-sm';
    } else {
      // Portrait
      mainIndicator.className = 'w-4 h-6 bg-cyan-400 rounded shadow-sm';
    }
    
    // Close dropdown
    imageSizeOptions.classList.add('hidden');
    dropdownArrow.style.transform = 'rotate(0deg)';
    
    // Scroll to generation button
    setTimeout(() => {
      const genButton = $('#genImage');
      genButton.scrollIntoView({ 
        behavior: 'smooth', 
        block: 'center' 
      });
      
      genButton.classList.add('animate-bounce-gentle');
      setTimeout(() => {
        genButton.classList.remove('animate-bounce-gentle');
      }, 2000);
    }, 200);
    
    console.log(`🖼️ Rasm o'lchami tanlandi: ${size}`);
  });
});

// Close dropdown when clicking outside
document.addEventListener('click', (e) => {
  if (!imageSizeDropdown?.contains(e.target) && !imageSizeOptions?.contains(e.target)) {
    imageSizeOptions?.classList.add('hidden');
    if (dropdownArrow) dropdownArrow.style.transform = 'rotate(0deg)';
  }
});

// Ratio buttons
$$('.ratio-btn').forEach(btn=> btn.addEventListener('click', ()=> {
  $$('.ratio-btn').forEach(b=> b.classList.remove('bg-white/12'));
  btn.classList.add('bg-white/12');
}));

/* ---------- File input display with preview ---------- */
const fileInput = $('#file');
const fileNameEl = $('#fileName');
const fileDrop = $('#fileDrop');
const preview = $('#preview');

// Image file upload functionality
fileDrop.addEventListener('click', ()=> fileInput.click());

// Drag and drop functionality for images
fileDrop.addEventListener('dragover', (e) => {
  e.preventDefault();
  fileDrop.classList.add('border-cyan-400', 'bg-white/10');
});

fileDrop.addEventListener('dragleave', (e) => {
  e.preventDefault();
  fileDrop.classList.remove('border-cyan-400', 'bg-white/10');
});

fileDrop.addEventListener('drop', (e) => {
  e.preventDefault();
  fileDrop.classList.remove('border-cyan-400', 'bg-white/10');
  
  const files = e.dataTransfer.files;
  if (files.length > 0 && files[0].type.startsWith('image/')) {
    fileInput.files = files;
    handleImageFileSelect(files[0]);
  }
});

fileInput.addEventListener('change', (e)=>{
  const f = e.target.files[0];
  if (f) {
    handleImageFileSelect(f);
  } else {
    fileNameEl.textContent = 'Fayl tanlanmagan';
  }
});

function handleImageFileSelect(file) {
  fileNameEl.textContent = `${file.name} (${Math.round(file.size/1024)}KB)`;
  
  // Show image preview in the upload area itself
  if (file.type.startsWith('image/')) {
    const reader = new FileReader();
    reader.onload = function(e) {
      // Create temporary image to get dimensions
      const tempImg = new Image();
      tempImg.onload = function() {
        // Calculate optimal height based on image aspect ratio
        const containerWidth = fileDrop.offsetWidth;
        const aspectRatio = this.naturalHeight / this.naturalWidth;
        const optimalHeight = Math.min(containerWidth * aspectRatio, 400); // Max height 400px
        const minHeight = Math.max(optimalHeight, 128); // Min height 128px (h-32)
        
        // Set the container height
        fileDrop.style.height = minHeight + 'px';
        fileDrop.style.minHeight = minHeight + 'px';
        
        // Replace the upload area content with the image
        fileDrop.innerHTML = `
          <div class="relative w-full h-full">
            <img src="${e.target.result}" class="w-full h-full object-contain rounded-xl" alt="Yuklangan rasm">
            <div class="absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity duration-200 flex items-center justify-center rounded-xl">
              <div class="text-center text-white">
                <svg class="w-8 h-8 mx-auto mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
                </svg>
                <div class="text-sm">Boshqa rasm tanlash</div>
              </div>
            </div>
            <div class="absolute top-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded">
              <button onclick="clearImageUpload()" class="hover:text-red-400">✕</button>
            </div>
          </div>
        `;
        
        // Make the area still clickable for new uploads
        fileDrop.style.cursor = 'pointer';
      };
      tempImg.src = e.target.result;
    };
    reader.readAsDataURL(file);
  }
}

// Function to clear image upload and restore original state
function clearImageUpload() {
  // Reset container size
  fileDrop.style.height = '';
  fileDrop.style.minHeight = '8rem'; // h-32 equivalent
  
  fileDrop.innerHTML = `
    <div class="text-center">
      <svg class="w-8 h-8 text-white/60 group-hover:text-cyan-400 mx-auto mb-2 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
      </svg>
      <div class="text-sm text-white/60 group-hover:text-white">Rasm faylni bu yerga torting yoki bosing</div>
      <div id="fileName" class="text-xs text-white/40">Fayl tanlanmagan</div>
    </div>
  `;
  fileInput.value = '';
  fileNameEl.textContent = 'Fayl tanlanmagan';
}

// Video file upload functionality
const videoFileInput = $('#videoFile');
const videoFileNameEl = $('#videoFileName');
const videoFileDrop = $('#videoFileDrop');

videoFileDrop.addEventListener('click', ()=> videoFileInput.click());

// Drag and drop functionality for videos
videoFileDrop.addEventListener('dragover', (e) => {
  e.preventDefault();
  videoFileDrop.classList.add('border-cyan-400', 'bg-white/10');
});

videoFileDrop.addEventListener('dragleave', (e) => {
  e.preventDefault();
  videoFileDrop.classList.remove('border-cyan-400', 'bg-white/10');
});

videoFileDrop.addEventListener('drop', (e) => {
  e.preventDefault();
  videoFileDrop.classList.remove('border-cyan-400', 'bg-white/10');
  
  const files = e.dataTransfer.files;
  if (files.length > 0 && files[0].type.startsWith('video/')) {
    videoFileInput.files = files;
    handleVideoFileSelect(files[0]);
  }
});

videoFileInput.addEventListener('change', (e)=>{
  const f = e.target.files[0];
  if (f) {
    handleVideoFileSelect(f);
  } else {
    videoFileNameEl.textContent = 'Fayl tanlanmagan';
  }
});

function handleVideoFileSelect(file) {
  videoFileNameEl.textContent = `${file.name} (${Math.round(file.size/1024)}KB)`;
  
  // Show video preview in the upload area itself
  if (file.type.startsWith('video/')) {
    const reader = new FileReader();
    reader.onload = function(e) {
      // Create temporary video to get dimensions
      const tempVideo = document.createElement('video');
      tempVideo.onloadedmetadata = function() {
        // Calculate optimal height based on video aspect ratio
        const containerWidth = videoFileDrop.offsetWidth;
        const aspectRatio = this.videoHeight / this.videoWidth;
        const optimalHeight = Math.min(containerWidth * aspectRatio, 400); // Max height 400px
        const minHeight = Math.max(optimalHeight, 128); // Min height 128px (h-32)
        
        // Set the container height
        videoFileDrop.style.height = minHeight + 'px';
        videoFileDrop.style.minHeight = minHeight + 'px';
        
        // Replace the upload area content with the video
        videoFileDrop.innerHTML = `
          <div class="relative w-full h-full">
            <video src="${e.target.result}" class="w-full h-full object-contain rounded-xl" controls muted>
              Sizning brauzeringiz video elementni qo'llab-quvvatlamaydi.
            </video>
            <div class="absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity duration-200 flex items-center justify-center rounded-xl pointer-events-none">
              <div class="text-center text-white pointer-events-auto">
                <svg class="w-8 h-8 mx-auto mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
                </svg>
                <div class="text-sm">Boshqa video tanlash</div>
              </div>
            </div>
            <div class="absolute top-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded">
              <button onclick="clearVideoUpload()" class="hover:text-red-400">✕</button>
            </div>
          </div>
        `;
        
        // Make the area still clickable for new uploads
        videoFileDrop.style.cursor = 'pointer';
      };
      tempVideo.src = e.target.result;
    };
    reader.readAsDataURL(file);
  }
}

// Function to clear video upload and restore original state
function clearVideoUpload() {
  // Reset container size
  videoFileDrop.style.height = '';
  videoFileDrop.style.minHeight = '8rem'; // h-32 equivalent
  
  videoFileDrop.innerHTML = `
    <div class="text-center">
      <svg class="w-8 h-8 text-white/60 group-hover:text-cyan-400 mx-auto mb-2 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
      </svg>
      <div class="text-sm text-white/60 group-hover:text-white">Video faylni bu yerga torting yoki bosing</div>
      <div id="videoFileName" class="text-xs text-white/40">Fayl tanlanmagan</div>
    </div>
  `;
  videoFileInput.value = '';
  videoFileNameEl.textContent = 'Fayl tanlanmagan';
}

// AI generatsiya funksiyalari
const PROXY_BASE = '/api';

async function generateImageFromAI({ prompt, file=null, size='1024x1024' }) {
  const currentUser = getCurrent();
  
  if (!currentUser || !currentUser.email) {
    alert('Iltimos, avval tizimga kiring.');
    openAuth('login');
    return;
  }

  const preview = $('#preview');
  resetPreviewContainer();
  preview.innerHTML = '<div class="text-white/60">AI rasm yaratilmoqda — iltimos kuting...</div>';

  try {
    // Tanlangan tilni olish (default: uzbek)
    const responseLanguageEl = $('#responseLanguage');
    const selectedLanguage = responseLanguageEl ? responseLanguageEl.value : 'uzbek';
    
    // Prompt ga til ko'rsatmasini qo'shish
    let enhancedPrompt = prompt;
    if (selectedLanguage === 'uzbek') {
      enhancedPrompt = `${prompt}. Agar tavsif yoki matn kerak bo'lsa, faqat o'zbek tilida yozing.`;
    } else if (selectedLanguage === 'russian') {
      enhancedPrompt = `${prompt}. Если нужно описание или текст, пишите только на русском языке.`;
    } else if (selectedLanguage === 'english') {
      enhancedPrompt = `${prompt}. If description or text is needed, write only in English.`;
    }
    
    const fd = new FormData();
    fd.append('prompt', enhancedPrompt);
    fd.append('size', size);
    fd.append('email', currentUser.email);
    fd.append('language', selectedLanguage);
    if(file) fd.append('file', file);
    
    console.log('🖼️ Rasm generatsiya so\'rovi yuborilmoqda...');
    console.log(`📝 Prompt: ${prompt}`);
    console.log(`📧 Email: ${currentUser.email}`);
    
    const res = await fetch(`${PROXY_BASE}/generate-image`, { 
      method: 'POST', 
      body: fd 
    });
    
    if (!res.ok) {
      const errorText = await res.text();
      console.error('❌ Server xatosi:', res.status, errorText);
      throw new Error(`Server xatosi: ${res.status} - ${errorText}`);
    }
    
    const data = await res.json();
    console.log('📨 Server javobi:', data);
    
    if (!data || !data.image) {
      throw new Error('Server dan noto\'g\'ri javob keldi');
    }
    
    if(data && data.image){
      // Create image element and adjust container
      const img = new Image();
      img.onload = function() {
        // Calculate aspect ratio and adjust container height
        const aspectRatio = this.naturalHeight / this.naturalWidth;
        const containerWidth = preview.offsetWidth;
        const newHeight = Math.min(containerWidth * aspectRatio, 600); // Max height 600px
        
        preview.style.height = newHeight + 'px';
        preview.style.minHeight = 'auto';
      };
      img.src = data.image;
      
      preview.innerHTML = `
        <div class="relative w-full h-full overflow-hidden rounded-xl">
          <!-- Blur background -->
          <div class="absolute inset-0 w-full h-full">
            <img src="${data.image}" class="w-full h-full object-cover blur-2xl scale-110 opacity-60" alt="Background">
          </div>
          
          <!-- Main image -->
          <div class="relative z-10 w-full h-full flex items-center justify-center p-4">
            <img src="${data.image}" class="max-w-full max-h-full object-contain rounded-lg shadow-2xl" alt="AI Generated Image">
          </div>
          
          <!-- Provider badge -->

          </div>
        </div>
      `;
      
      // Save to gallery
      saveToGallery(data.image, prompt, data.provider);
      
      // Limit o'chirildi - cheksiz generation
    } else {
      // Demo mode - create a placeholder image with the selected size
      console.log('⚠️ Server javob bermadi, demo rejimda ishlaydi');
      console.log(`🎨 Demo rasm yaratilmoqda: ${size}`);
      
      // Create a demo canvas with the selected dimensions
      const [width, height] = size.split('x').map(Number);
      console.log(`📐 Canvas o'lchamlari: ${width} x ${height}`);
      
      const canvas = document.createElement('canvas');
      canvas.width = width;
      canvas.height = height;
      const ctx = canvas.getContext('2d');
      
      // Create gradient background
      const gradient = ctx.createLinearGradient(0, 0, width, height);
      gradient.addColorStop(0, '#06b6d4');
      gradient.addColorStop(1, '#8b5cf6');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, width, height);
      
      // Add text showing the dimensions
      ctx.fillStyle = 'white';
      const fontSize = Math.max(Math.min(width, height) / 15, 20);
      ctx.font = `bold ${fontSize}px Arial`;
      ctx.textAlign = 'center';
      ctx.fillText(`${size}`, width/2, height/2 - fontSize/2);
      ctx.fillText('DEMO RASM', width/2, height/2 + fontSize/2);
      
      // Add border
      ctx.strokeStyle = 'white';
      ctx.lineWidth = Math.max(width, height) / 200;
      ctx.strokeRect(ctx.lineWidth/2, ctx.lineWidth/2, width - ctx.lineWidth, height - ctx.lineWidth);
      
      const demoImageUrl = canvas.toDataURL();
      
      // Calculate aspect ratio and adjust container
      const aspectRatio = height / width;
      const containerWidth = preview.offsetWidth;
      const newHeight = Math.min(containerWidth * aspectRatio, 600);
      
      preview.style.height = newHeight + 'px';
      preview.style.minHeight = 'auto';
      
      preview.innerHTML = `
        <div class="relative w-full h-full">
          <img src="${demoImageUrl}" class="w-full h-full object-contain rounded-xl" alt="Demo Image">
          <div class="absolute bottom-2 left-2 bg-black/70 text-white text-xs px-2 py-1 rounded">
            Demo: ${size}
          </div>
          <div class="absolute top-2 right-2 bg-yellow-500/80 text-black text-xs px-2 py-1 rounded">
            DEMO
          </div>
        </div>
      `;
    }
  } catch(err){
    console.error('❌ Generatsiya xatosi:', err);
    preview.innerHTML = `<div class="text-red-400 p-4">Xatolik: ${err.message}</div>`;
  }
}

async function generateVideoFromAI({ prompt, file=null, duration=10 }) {
  const currentUser = getCurrent();
  
  if (!currentUser || !currentUser.email) {
    alert('Iltimos, avval tizimga kiring.');
    openAuth('login');
    return;
  }

  const preview = $('#preview');
  resetPreviewContainer();
  preview.innerHTML = '<div class="text-white/60">AI video yaratilmoqda — iltimos kuting...</div>';

  try {
    // Tanlangan tilni olish
    const selectedLanguage = $('#videoResponseLanguage').value;
    
    // Prompt ga til ko'rsatmasini qo'shish
    let enhancedPrompt = prompt;
    if (selectedLanguage === 'uzbek') {
      enhancedPrompt = `${prompt}. Agar tavsif yoki matn kerak bo'lsa, faqat o'zbek tilida yozing.`;
    } else if (selectedLanguage === 'russian') {
      enhancedPrompt = `${prompt}. Если нужно описание или текст, пишите только на русском языке.`;
    } else if (selectedLanguage === 'english') {
      enhancedPrompt = `${prompt}. If description or text is needed, write only in English.`;
    }
    
    const fd = new FormData();
    fd.append('prompt', enhancedPrompt);
    fd.append('duration', duration);
    fd.append('email', currentUser.email);
    fd.append('language', selectedLanguage);
    if(file) fd.append('file', file);
    
    console.log('🎥 Video generatsiya so\'rovi yuborilmoqda...');
    
    const res = await fetch(`${PROXY_BASE}/generate-video`, { 
      method: 'POST', 
      body: fd 
    });
    
    const data = await res.json();
    console.log('📨 Server javobi:', data);
    
    if (!res.ok) {
      throw new Error(data.error || `Server xatosi: ${res.status}`);
    }
    
    if(data && data.video){
      // Create video element and adjust container
      const video = document.createElement('video');
      video.onloadedmetadata = function() {
        // Calculate aspect ratio and adjust container height
        const aspectRatio = this.videoHeight / this.videoWidth;
        const containerWidth = preview.offsetWidth;
        const newHeight = Math.min(containerWidth * aspectRatio, 600); // Max height 600px
        
        preview.style.height = newHeight + 'px';
        preview.style.minHeight = 'auto';
      };
      video.src = data.video;
      preview.innerHTML = `
        <video src="${data.video}" class="w-full h-full object-contain rounded-xl" controls autoplay muted loop>
          Sizning brauzeringiz video elementni qo'llab-quvvatlamaydi.
        </video>
      `;
      // Limit o'chirildi - cheksiz generation
    } else {
      throw new Error('No video returned from server.');
    }
  } catch(err){
    console.error('❌ Video xatosi:', err);
    preview.innerHTML = `<div class="text-red-400 p-4">Xatolik: ${err.message}</div>`;
  }
}

// Rasm yaratish tugmasini ulash
$('#genImage').addEventListener('click', async ()=>{
  const prompt = ($('#prompt').value || '').trim();
  const file = $('#file').files[0] || null;
  const size = $('#imageSize').value || '1024x1024';
  
  
  if(!prompt && !file){ 
    if(!confirm('Prompt kiritilmagan. Demo rasm yaratilishini xohlaysizmi?')) return; 
  }
  
  // Smooth scroll to preview area with animation
  const preview = $('#preview');
  preview.scrollIntoView({ 
    behavior: 'smooth', 
    block: 'center' 
  });
  
  // Add loading animation to button
  const button = $('#genImage');
  const originalText = button.innerHTML;
  button.innerHTML = `
    <div class="flex items-center gap-2">
      <div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
      <span>Yaratilmoqda...</span>
    </div>
  `;
  button.disabled = true;
  
  const params = { 
    prompt: prompt || 'Creative scene', 
    file, 
    size: size 
  };
  
  // Store parameters for regenerate functionality
  lastGenerationParams = {
    type: 'image',
    params: params
  };
  
  try {
    await generateImageFromAI(params);
  } finally {
    // Restore button
    button.innerHTML = originalText;
    button.disabled = false;
  }
});

// Video yaratish tugmasini ulash
$('#genVideo').addEventListener('click', async ()=>{
  const prompt = ($('#videoPrompt').value || '').trim();
  const file = $('#videoFile').files[0] || null;
  const duration = $('#videoSec').value || 10;
  
  if(!prompt && !file){ 
    if(!confirm('Prompt kiritilmagan. Demo video yaratilishini xohlaysizmi?')) return; 
  }
  
  // Smooth scroll to preview area with animation
  const preview = $('#preview');
  preview.scrollIntoView({ 
    behavior: 'smooth', 
    block: 'center' 
  });
  
  // Add loading animation to button
  const button = $('#genVideo');
  const originalText = button.innerHTML;
  button.innerHTML = `
    <div class="flex items-center gap-2">
      <div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
      <span>Yaratilmoqda...</span>
    </div>
  `;
  button.disabled = true;
  
  const params = { 
    prompt: prompt || 'Creative video scene', 
    file, 
    duration 
  };
  
  // Store parameters for regenerate functionality
  lastGenerationParams = {
    type: 'video',
    params: params
  };
  
  try {
    await generateVideoFromAI(params);
  } finally {
    // Restore button
    button.innerHTML = originalText;
    button.disabled = false;
  }
});

// Premium modalni ko'rsatish
function showPremiumModal() {
  const modal = document.createElement('div');
  modal.innerHTML = `
    <div class="fixed inset-0 bg-black/70 flex items-center justify-center z-50">
      <div class="glass rounded-2xl p-6 max-w-md w-full">
        <h3 class="text-xl font-bold mb-4">Bepul Generatsiya Chegarasi</h3>
        <p class="mb-4">Siz 10 ta bepul generatsiyadan foydalandingiz. Cheksiz generatsiya qilish uchun premium obuna sotib oling.</p>
        <div class="flex gap-3">
          <button onclick="closePremiumModal()" class="flex-1 px-4 py-2 rounded-xl border border-white/10">Keyinroq</button>
          <button onclick="redirectToPricing()" class="flex-1 btn-grad px-4 py-2 rounded-xl font-semibold">Obuna Bo'lish</button>
        </div>
      </div>
    </div>
  `;
  modal.id = 'premiumModal';
  document.body.appendChild(modal);
}

function closePremiumModal() {
  const modal = document.getElementById('premiumModal');
  if (modal) modal.remove();
}

function redirectToPricing() {
  closePremiumModal();
  document.getElementById('pricing').scrollIntoView({ behavior: 'smooth' });
}

// Generatsiya hisobchisi o'chirildi - cheksiz generation
// function updateGenerationCounter() - endi kerak emas

// Store last generation parameters for regenerate functionality
let lastGenerationParams = null;

// Function to reset preview container to default state
function resetPreviewContainer() {
  const preview = $('#preview');
  preview.style.height = '';
  preview.style.minHeight = '20rem'; // min-h-80 equivalent
}

// Download button (updated to handle both image and video)
$('#downloadBtn').addEventListener('click', ()=>{
  const preview = $('#preview');
  const media = preview.querySelector('img') || preview.querySelector('video');
  if(!media) { alert('Oldin natija yarating.'); return; }
  const link = document.createElement('a');
  link.href = media.src;
  link.download = media.tagName === 'VIDEO' ? 'doda_video.mp4' : 'doda_preview.png';
  document.body.appendChild(link);
  link.click();
  link.remove();
});

// Regenerate button functionality
$('#regenerateBtn').addEventListener('click', ()=>{
  if(!lastGenerationParams) { 
    alert('Avval biror narsa yarating, keyin qayta yaratish mumkin.'); 
    return; 
  }
  
  if(lastGenerationParams.type === 'image') {
    generateImageFromAI(lastGenerationParams.params);
  } else if(lastGenerationParams.type === 'video') {
    generateVideoFromAI(lastGenerationParams.params);
  }
});

// Enlarge/Zoom button functionality
$('#enlargeBtn').addEventListener('click', ()=>{
  const preview = $('#preview');
  const media = preview.querySelector('img') || preview.querySelector('video');
  if(!media) { 
    alert('Avval natija yarating.'); 
    return; 
  }
  
  const zoomOverlay = $('#zoomOverlay');
  const zoomContent = $('#zoomContent');
  
  // Clone the media element for zoom view
  const clonedMedia = media.cloneNode(true);
  clonedMedia.style.maxWidth = '100%';
  clonedMedia.style.maxHeight = '100%';
  clonedMedia.style.objectFit = 'contain';
  clonedMedia.classList.add('rounded-xl', 'shadow-2xl');
  
  // Clear previous content and add new
  zoomContent.innerHTML = '';
  zoomContent.appendChild(clonedMedia);
  
  // Show zoom modal
  show(zoomOverlay);
  document.body.style.overflow = 'hidden';
});

// Close zoom modal functionality
$('#closeZoom').addEventListener('click', ()=>{
  hide($('#zoomOverlay'));
  document.body.style.overflow = '';
});

// Close zoom on overlay click
$('#zoomOverlay').addEventListener('click', (e)=>{
  if(e.target === $('#zoomOverlay')) {
    hide($('#zoomOverlay'));
    document.body.style.overflow = '';
  }
});

// Close zoom on Escape key
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape' && !$('#zoomOverlay').classList.contains('hidden')) {
    hide($('#zoomOverlay'));
    document.body.style.overflow = '';
  }
});

/* ---------- Auth modal (localStorage demo) ---------- */
const btnOpenAuthHeader = $('#btnOpenAuthHeader');
const btnLogoutHeader = $('#btnLogoutHeader');
const authOverlay = $('#authOverlay');
const authCard = $('#authCard');
const btnCloseAuth = $('#btnCloseAuth');
const tabLogin = $('#tabLogin');
const tabPhoneLogin = $('#tabPhoneLogin');
const tabRegister = $('#tabRegister');
const googleLogin = $('#googleLogin');
const googleSignInBtn = $('#googleSignInBtn');
const googleLoginError = $('#googleLoginError');
const formPhoneLogin = $('#formPhoneLogin');
const formRegister = $('#formRegister');
const regName = $('#regName');
const regEmail = $('#regEmail');
const regPassword = $('#regPassword');
const loginError = $('#loginError');
const regError = $('#regError');

function openAuth(which='login'){
  show(authOverlay); show(authCard);
  authCard.classList.remove('hidden');
  
  // Reset all tabs
  tabLogin.classList.remove('bg-white/8');
  tabPhoneLogin.classList.remove('bg-white/8');
  tabRegister.classList.remove('bg-white/8');
  
  // Hide all forms
  hide(googleLogin);
  hide(formPhoneLogin);
  hide(formRegister);
  
  if(which==='register'){ 
    show(formRegister); 
    tabRegister.classList.add('bg-white/8'); 
  } else if(which==='phone'){ 
    show(formPhoneLogin); 
    tabPhoneLogin.classList.add('bg-white/8'); 
  } else { 
    show(googleLogin); 
    tabLogin.classList.add('bg-white/8'); 
  }
}
function closeAuth(){ hide(authOverlay); hide(authCard); }

btnOpenAuthHeader.addEventListener('click', ()=> openAuth('login'));
btnCloseAuth.addEventListener('click', closeAuth);
authOverlay.addEventListener('click', closeAuth);
tabLogin.addEventListener('click', ()=> openAuth('login'));
tabPhoneLogin.addEventListener('click', ()=> openAuth('phone'));
tabRegister.addEventListener('click', ()=> openAuth('register'));

// Simple storage
function getUsers(){ try { return JSON.parse(localStorage.getItem('doda_users')) || []; } catch(e){ console.error('localStorage error:', e); return []; } }
function setUsers(list){ try { localStorage.setItem('doda_users', JSON.stringify(list)); } catch(e){ console.error('localStorage set error:', e); } }
function getCurrent(){ try { return JSON.parse(localStorage.getItem('doda_current')); } catch(e){ console.error('localStorage current error:', e); return null; } }
function setCurrent(email){ try { localStorage.setItem('doda_current', JSON.stringify({ email })); } catch(e){ console.error('localStorage setCurrent error:', e); } updateAuthUI(); }

function getUserByEmail(email){ const users = getUsers(); return users.find(u=> u && u.email && u.email.toLowerCase() === email.toLowerCase()); }

// Mamlakat kodlari bazasi
const countryCodes = {
  '+93': { name: 'Afg\'oniston', flag: '🇦🇫' },
  '+355': { name: 'Albaniya', flag: '🇦🇱' },
  '+213': { name: 'Jazoir', flag: '🇩🇿' },
  '+376': { name: 'Andorra', flag: '🇦🇩' },
  '+244': { name: 'Angola', flag: '🇦🇴' },
  '+54': { name: 'Argentina', flag: '🇦🇷' },
  '+374': { name: 'Armaniston', flag: '🇦🇲' },
  '+61': { name: 'Avstraliya', flag: '🇦🇺' },
  '+43': { name: 'Avstriya', flag: '🇦🇹' },
  '+994': { name: 'Ozarbayjon', flag: '🇦🇿' },
  '+973': { name: 'Bahrayn', flag: '🇧🇭' },
  '+880': { name: 'Bangladesh', flag: '🇧🇩' },
  '+375': { name: 'Belarus', flag: '🇧🇾' },
  '+32': { name: 'Belgiya', flag: '🇧🇪' },
  '+501': { name: 'Beliz', flag: '🇧🇿' },
  '+55': { name: 'Braziliya', flag: '🇧🇷' },
  '+359': { name: 'Bolgariya', flag: '🇧🇬' },
  '+1': { name: 'AQSH/Kanada', flag: '🇺🇸' },
  '+86': { name: 'Xitoy', flag: '🇨🇳' },
  '+420': { name: 'Chexiya', flag: '🇨🇿' },
  '+45': { name: 'Daniya', flag: '🇩🇰' },
  '+20': { name: 'Misr', flag: '🇪🇬' },
  '+33': { name: 'Fransiya', flag: '🇫🇷' },
  '+995': { name: 'Gruziya', flag: '🇬🇪' },
  '+49': { name: 'Germaniya', flag: '🇩🇪' },
  '+30': { name: 'Gretsiya', flag: '🇬🇷' },
  '+91': { name: 'Hindiston', flag: '🇮🇳' },
  '+62': { name: 'Indoneziya', flag: '🇮🇩' },
  '+98': { name: 'Eron', flag: '🇮🇷' },
  '+964': { name: 'Iroq', flag: '🇮🇶' },
  '+353': { name: 'Irlandiya', flag: '🇮🇪' },
  '+972': { name: 'Isroil', flag: '🇮🇱' },
  '+39': { name: 'Italiya', flag: '🇮🇹' },
  '+81': { name: 'Yaponiya', flag: '🇯🇵' },
  '+7': { name: 'Rossiya/Qozog\'iston', flag: '🇷🇺' },
  '+996': { name: 'Qirg\'iziston', flag: '🇰🇬' },
  '+82': { name: 'Janubiy Koreya', flag: '🇰🇷' },
  '+965': { name: 'Quvayt', flag: '🇰🇼' },
  '+60': { name: 'Malayziya', flag: '🇲🇾' },
  '+52': { name: 'Meksika', flag: '🇲🇽' },
  '+31': { name: 'Niderlandiya', flag: '🇳🇱' },
  '+47': { name: 'Norvegiya', flag: '🇳🇴' },
  '+92': { name: 'Pokiston', flag: '🇵🇰' },
  '+48': { name: 'Polsha', flag: '🇵🇱' },
  '+351': { name: 'Portugaliya', flag: '🇵🇹' },
  '+974': { name: 'Qatar', flag: '🇶🇦' },
  '+966': { name: 'Saudiya Arabistoni', flag: '🇸🇦' },
  '+65': { name: 'Singapur', flag: '🇸🇬' },
  '+27': { name: 'Janubiy Afrika', flag: '🇿🇦' },
  '+34': { name: 'Ispaniya', flag: '🇪🇸' },
  '+46': { name: 'Shvetsiya', flag: '🇸🇪' },
  '+41': { name: 'Shveytsariya', flag: '🇨🇭' },
  '+90': { name: 'Turkiya', flag: '🇹🇷' },
  '+993': { name: 'Turkmaniston', flag: '🇹🇲' },
  '+380': { name: 'Ukraina', flag: '🇺🇦' },
  '+971': { name: 'BAA', flag: '🇦🇪' },
  '+44': { name: 'Buyuk Britaniya', flag: '🇬🇧' },
  '+998': { name: 'O\'zbekiston', flag: '🇺🇿' },
  '+84': { name: 'Vyetnam', flag: '🇻🇳' }
};

// Telefon raqami elementlari
const phoneNumber = $('#phoneNumber');
const countryFlag = $('#countryFlag');
const countryName = $('#countryName');
const smsCodeSection = $('#smsCodeSection');
const smsCode = $('#smsCode');
const phoneLoginBtn = $('#phoneLoginBtn');
const phoneLoginError = $('#phoneLoginError');
const resendTimer = $('#resendTimer');

// Telefon raqamini formatlash
function formatPhoneNumber(value) {
  // Faqat raqamlar va + belgisini qoldirish
  let cleaned = value.replace(/[^\d+]/g, '');
  
  // Agar + bilan boshlanmasa, qo'shish
  if (!cleaned.startsWith('+')) {
    cleaned = '+' + cleaned;
  }
  
  return cleaned;
}

// Mamlakat kodini aniqlash
function detectCountry(phoneNumber) {
  const cleaned = formatPhoneNumber(phoneNumber);
  
  // Eng uzun koddan boshlab tekshirish
  const sortedCodes = Object.keys(countryCodes).sort((a, b) => b.length - a.length);
  
  for (const code of sortedCodes) {
    if (cleaned.startsWith(code)) {
      return countryCodes[code];
    }
  }
  
  return null;
}

// Telefon raqami kiritilganda
phoneNumber.addEventListener('input', (e) => {
  const formatted = formatPhoneNumber(e.target.value);
  e.target.value = formatted;
  
  const country = detectCountry(formatted);
  if (country) {
    countryFlag.textContent = country.flag;
    countryName.textContent = country.name;
    show(countryName);
  } else {
    countryFlag.textContent = '';
    countryName.textContent = '';
    hide(countryName);
  }
});

// SMS yuborish va tasdiqlash
let smsTimer = null;
let smsTimeLeft = 0;

function startResendTimer() {
  smsTimeLeft = 60;
  updateTimerDisplay();
  
  smsTimer = setInterval(() => {
    smsTimeLeft--;
    updateTimerDisplay();
    
    if (smsTimeLeft <= 0) {
      clearInterval(smsTimer);
      phoneLoginBtn.textContent = 'SMS qayta yuborish';
      phoneLoginBtn.disabled = false;
    }
  }, 1000);
}

function updateTimerDisplay() {
  if (smsTimeLeft > 0) {
    resendTimer.textContent = `${smsTimeLeft}s`;
    // SMS kod bo'limi ko'rsatilgan bo'lsa, tugmani "Tasdiqlash" qilib qo'yamiz
    if (!smsCodeSection.classList.contains('hidden')) {
      phoneLoginBtn.textContent = 'Tasdiqlash';
      phoneLoginBtn.disabled = false;
    } else {
      phoneLoginBtn.textContent = 'Kutilmoqda...';
      phoneLoginBtn.disabled = true;
    }
  } else {
    resendTimer.textContent = '';
    if (!smsCodeSection.classList.contains('hidden')) {
      phoneLoginBtn.textContent = 'Tasdiqlash';
      phoneLoginBtn.disabled = false;
    } else {
      phoneLoginBtn.textContent = 'SMS qayta yuborish';
      phoneLoginBtn.disabled = false;
    }
  }
}

// Firebase SMS yuborish
let recaptchaVerifier = null;
let confirmationResult = null;

// reCAPTCHA sozlash
function setupRecaptcha() {
  if (!window.firebaseAuth || !window.RecaptchaVerifier) {
    console.error('Firebase Auth yoki RecaptchaVerifier yuklanmagan');
    return false;
  }
  
  if (!recaptchaVerifier) {
    recaptchaVerifier = new window.RecaptchaVerifier(window.firebaseAuth, 'recaptcha-container', {
      'size': 'compact',
      'callback': (response) => {
        console.log('reCAPTCHA yechildi');
      },
      'expired-callback': () => {
        console.log('reCAPTCHA muddati tugadi');
      }
    });
  }
  return true;
}

// Firebase orqali SMS yuborish
async function sendSMS(phoneNumber) {
  try {
    if (!setupRecaptcha()) {
      return { success: false, message: 'Firebase yuklanmagan. Sahifani yangilang.' };
    }
    
    // reCAPTCHA render qilish
    await recaptchaVerifier.render();
    
    // SMS yuborish
    confirmationResult = await window.signInWithPhoneNumber(window.firebaseAuth, phoneNumber, recaptchaVerifier);
    
    console.log('SMS muvaffaqiyatli yuborildi:', phoneNumber);
    return { success: true, message: 'SMS yuborildi' };
    
  } catch (error) {
    console.error('SMS yuborishda xatolik:', error);
    
    // reCAPTCHA ni tozalash
    if (recaptchaVerifier) {
      recaptchaVerifier.clear();
      recaptchaVerifier = null;
    }
    
    let errorMessage = 'SMS yuborishda xatolik';
    
    if (error.code === 'auth/invalid-phone-number') {
      errorMessage = 'Noto\'g\'ri telefon raqami';
    } else if (error.code === 'auth/too-many-requests') {
      errorMessage = 'Juda ko\'p urinish. Keyinroq qayta urinib ko\'ring';
    } else if (error.code === 'auth/captcha-check-failed') {
      errorMessage = 'reCAPTCHA tekshiruvi muvaffaqiyatsiz';
    }
    
    return { success: false, message: errorMessage };
  }
}

// Firebase SMS kodini tekshirish
async function verifySMS(inputCode) {
  try {
    if (!confirmationResult) {
      return { success: false, message: 'SMS kod yuborilmagan' };
    }
    
    // Firebase orqali kodni tekshirish
    const result = await confirmationResult.confirm(inputCode);
    const user = result.user;
    
    console.log('Foydalanuvchi muvaffaqiyatli tasdiqlandi:', user.phoneNumber);
    
    // Muvaffaqiyatli tasdiqlash
    confirmationResult = null;
    return { 
      success: true, 
      message: 'Kod tasdiqlandi',
      user: user
    };
    
  } catch (error) {
    console.error('SMS kod tekshirishda xatolik:', error);
    
    let errorMessage = 'Noto\'g\'ri kod';
    
    if (error.code === 'auth/invalid-verification-code') {
      errorMessage = 'Noto\'g\'ri tasdiqlash kodi';
    } else if (error.code === 'auth/code-expired') {
      errorMessage = 'Kod muddati tugagan';
    }
    
    return { success: false, message: errorMessage };
  }
}

// Telegramga xabar yuborish funksiyalari
async function notifyTelegramLogin(email, name) {
  try {
    const response = await fetch('/api/notify-login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, name })
    });
    return await response.json();
  } catch (error) {
    return { success: false, error: error.message };
  }
}

async function notifyTelegramRegister(email, name) {
  try {
    const response = await fetch('/api/notify-register', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, name })
    });
    return await response.json();
  } catch (error) {
    return { success: false, error: error.message };
  }
}

formRegister.addEventListener('submit', async (e)=>{
  e.preventDefault();
  regError.textContent=''; hide(regError);
  const name = regName.value.trim(), email = regEmail.value.trim(), pass = regPassword.value;
  if(!name){ regError.textContent='Ism kiriting.'; show(regError); return; }
  if(!email || !email.includes('@')){ regError.textContent='Togri email kiriting.'; show(regError); return; }
  if(pass.length < 6){ regError.textContent='Parol kamida 6 belgidan.'; show(regError); return; }
  if(getUserByEmail(email)){ regError.textContent='Bu email bilan hisob mavjud.'; show(regError); return; }
  const users = getUsers(); users.push({ name, email, pass }); setUsers(users); setCurrent(email);
  
  // Telegramga xabar
  await notifyTelegramRegister(email, name);
  
  regName.value=''; regEmail.value=''; regPassword.value=''; closeAuth();
});

// Google orqali kirish
googleSignInBtn.addEventListener('click', async () => {
  googleLoginError.textContent = '';
  hide(googleLoginError);
  
  // Firebase tayyor emasligini tekshirish
  if (!window.firebaseReady) {
    googleLoginError.textContent = 'Firebase yuklanmoqda... Iltimos kuting';
    show(googleLoginError);
    return;
  }
  
  try {
    if (!window.firebaseAuth || !window.GoogleAuthProvider || !window.signInWithPopup) {
      throw new Error('Firebase Auth yuklanmagan. Sahifani yangilang.');
    }
    
    const provider = new window.GoogleAuthProvider();
    const result = await window.signInWithPopup(window.firebaseAuth, provider);
    
    // Google foydalanuvchi ma'lumotlari
    const user = result.user;
    const email = user.email;
    const name = user.displayName;
    const photoURL = user.photoURL;
    
    // Foydalanuvchini tizimga kiritish
    const users = getUsers();
    let existingUser = users.find(u => u.email === email);
    
    if (!existingUser) {
      // Yangi Google foydalanuvchi yaratish
      existingUser = { 
        name, 
        email, 
        photoURL,
        provider: 'google',
        firebaseUid: user.uid
      };
      users.push(existingUser);
      setUsers(users);
    }
    
    setCurrent(email);
    
    // UI ni yangilash
    updateAuthUI();
    
    // Telegramga xabar
    await notifyTelegramLogin(email, name);
    
    closeAuth();
    
  } catch (error) {
    console.error('Google kirish xatoligi:', error);
    
    let errorMessage = 'Google orqali kirishda xatolik';
    
    if (error.code === 'auth/popup-closed-by-user') {
      errorMessage = 'Kirish bekor qilindi';
    } else if (error.code === 'auth/popup-blocked') {
      errorMessage = 'Popup bloklangan. Browser sozlamalarini tekshiring';
    } else if (error.code === 'auth/cancelled-popup-request') {
      errorMessage = 'Kirish bekor qilindi';
    }
    
    googleLoginError.textContent = errorMessage;
    show(googleLoginError);
  }
});

// Telefon orqali kirish
formPhoneLogin.addEventListener('submit', async (e) => {
  e.preventDefault();
  phoneLoginError.textContent = '';
  hide(phoneLoginError);
  
  const phone = phoneNumber.value.trim();
  const code = smsCode.value.trim();
  
  if (!phone) {
    phoneLoginError.textContent = 'Telefon raqamini kiriting';
    show(phoneLoginError);
    return;
  }
  
  // Agar SMS kod bo'limi ko'rsatilmagan bo'lsa, SMS yuborish
  if (smsCodeSection.classList.contains('hidden')) {
    const country = detectCountry(phone);
    if (!country) {
      phoneLoginError.textContent = 'Noto\'g\'ri telefon raqami formati';
      show(phoneLoginError);
      return;
    }
    
    try {
      const result = await sendSMS(phone);
      if (result.success) {
        show(smsCodeSection);
        phoneLoginBtn.textContent = 'Tasdiqlash';
        phoneLoginBtn.disabled = false;
        startResendTimer();
        phoneLoginError.textContent = '';
        hide(phoneLoginError);
      } else {
        phoneLoginError.textContent = result.message || 'SMS yuborishda xatolik';
        show(phoneLoginError);
      }
    } catch (error) {
      phoneLoginError.textContent = 'SMS yuborishda xatolik';
      show(phoneLoginError);
    }
  } else {
    // SMS kodini tekshirish
    if (!code) {
      phoneLoginError.textContent = 'SMS kodini kiriting';
      show(phoneLoginError);
      return;
    }
    
    const verification = await verifySMS(code);
    if (verification.success) {
      // Firebase foydalanuvchisi
      const firebaseUser = verification.user;
      
      // Foydalanuvchini tizimga kiritish
      const users = getUsers();
      let user = users.find(u => u.phone === phone);
      
      if (!user) {
        // Yangi foydalanuvchi yaratish
        const name = `Foydalanuvchi ${phone.slice(-4)}`;
        user = { 
          name, 
          phone, 
          email: `${phone.replace('+', '')}@phone.local`,
          firebaseUid: firebaseUser.uid
        };
        users.push(user);
        setUsers(users);
      }
      
      setCurrent(user.email);
      
      // UI ni yangilash
      updateAuthUI();
      
      // Formani tozalash
      phoneNumber.value = '';
      smsCode.value = '';
      hide(smsCodeSection);
      phoneLoginBtn.textContent = 'SMS yuborish';
      countryFlag.textContent = '';
      countryName.textContent = '';
      hide(countryName);
      
      if (smsTimer) {
        clearInterval(smsTimer);
        smsTimer = null;
      }
      
      closeAuth();
    } else {
      phoneLoginError.textContent = verification.message;
      show(phoneLoginError);
    }
  }
});

function updateAuthUI(){
  try {
    const cur = getCurrent();
    const userProfile = $('#userProfile');
    const userName = $('#userName');
    const userAvatar = $('#userAvatar');
    const userProvider = $('#userProvider');
    const sidebarUserName = $('#sidebarUserName');
    const sidebarUserAvatar = $('#sidebarUserAvatar');
    const sidebarUserProvider = $('#sidebarUserProvider');
    
    if(cur && cur.email){
      // Foydalanuvchi kirgan
      hide(btnOpenAuthHeader);
      show(userProfile);
      
      // Foydalanuvchi ma'lumotlarini o'rnatish
      const displayName = cur.name || cur.email.split('@')[0];
      userName.textContent = displayName;
      sidebarUserName.textContent = displayName;
      
      // Profil rasmini o'rnatish
      if (cur.photoURL) {
        // Google foydalanuvchisi - haqiqiy rasm
        userAvatar.src = cur.photoURL;
        sidebarUserAvatar.src = cur.photoURL;
        userAvatar.style.display = 'block';
        sidebarUserAvatar.style.display = 'block';
      } else {
        // Telefon foydalanuvchisi - default avatar
        const defaultAvatar = `https://ui-avatars.com/api/?name=${encodeURIComponent(displayName)}&background=7C3AED&color=fff&size=128`;
        userAvatar.src = defaultAvatar;
        sidebarUserAvatar.src = defaultAvatar;
        userAvatar.style.display = 'block';
        sidebarUserAvatar.style.display = 'block';
      }
      
      // Provider ma'lumoti
      if (cur.provider === 'google') {
        userProvider.textContent = 'Google';
        sidebarUserProvider.textContent = 'Google orqali';
      } else if (cur.phone) {
        userProvider.textContent = 'Telefon';
        sidebarUserProvider.textContent = 'Telefon orqali';
      } else {
        userProvider.textContent = 'Bepul rejim';
        sidebarUserProvider.textContent = 'Bepul rejim';
      }
      
      // Bepul rejim uchun yashil rang
      if (!cur.provider || cur.provider !== 'google') {
        userProvider.style.color = '#10B981'; // Yashil rang
        sidebarUserProvider.style.color = '#10B981'; // Yashil rang
      } else {
        userProvider.style.color = ''; // Default rang
        sidebarUserProvider.style.color = ''; // Default rang
      }
      
    } else {
      // Foydalanuvchi kirmagan
      show(btnOpenAuthHeader);
      hide(userProfile);
      
      // Default qiymatlar
      sidebarUserName.textContent = 'Mehmon';
      sidebarUserProvider.textContent = 'Bepul rejim';
      sidebarUserAvatar.src = '';
      sidebarUserAvatar.style.display = 'none';
    }
  } catch(e){ console.error('updateAuthUI error:', e); }
}
updateAuthUI();

btnLogoutHeader.addEventListener('click', ()=>{
  localStorage.removeItem('doda_current'); 
  updateAuthUI(); 
  alert('Tizimdan chiqildi');
});

/* ---------- Pricing: monthly/yearly toggle + slider indicator ---------- */
const monthly = $('#monthly'), yearly = $('#yearly');
const tabMonthly = $('#tabMonthly'), tabYearly = $('#tabYearly'), sliderIndicator = $('#sliderIndicator');

function setMonthly(){
  monthly.classList.remove('hidden'); yearly.classList.add('hidden');
  tabMonthly.classList.add('text-white'); tabMonthly.classList.remove('text-white/70');
  tabYearly.classList.add('text-white/70'); tabYearly.classList.remove('text-white');
  sliderIndicator.style.transform = 'translateX(0)';
}
function setYearly(){
  monthly.classList.add('hidden'); yearly.classList.remove('hidden');
  tabYearly.classList.add('text-white'); tabYearly.classList.remove('text-white/70');
  tabMonthly.classList.add('text-white/70'); tabMonthly.classList.remove('text-white');
  sliderIndicator.style.transform = 'translateX(104px)';
}

tabMonthly.addEventListener('click', setMonthly);
tabYearly.addEventListener('click', setYearly);
setMonthly();

/* ---------- Stripe subscribe buttons ---------- */
$$('.subscribe-btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const cur = getCurrent();
    if(!cur || !cur.email){
      openAuth('login');
      setTimeout(()=> { $('#loginError').textContent = 'Davom etish uchun avval tizimga kiring.'; show($('#loginError')); }, 60);
      return;
    }
    const url = btn.dataset.link;
    if(!url){ alert('Stripe havolasi mavjud emas.'); return; }
    window.location.href = url;
  });
});

/* ---------- SIDEBAR FUNCTIONALITY ---------- */
const sidebar = $('#sidebar');
const sidebarToggle = $('#sidebarToggle');
const sidebarOverlay = $('#sidebarOverlay');
const mainContent = $('#mainContent');
const sidebarLinks = $$('.sidebar-link');

function openSidebar() {
  sidebar.classList.add('open');
  sidebarOverlay.classList.add('active');
  sidebarToggle.classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeSidebar() {
  sidebar.classList.remove('open');
  sidebarOverlay.classList.remove('active');
  sidebarToggle.classList.remove('open');
  document.body.style.overflow = '';
}

sidebarToggle?.addEventListener('click', (e)=> {
  e.stopPropagation();
  if (sidebar.classList.contains('open')) {
    closeSidebar();
  } else {
    openSidebar();
  }
});

sidebarOverlay?.addEventListener('click', closeSidebar);

document.addEventListener('click', (e)=> {
  if (window.innerWidth <= 768 && !sidebar.contains(e.target) && !sidebarToggle.contains(e.target) && sidebar.classList.contains('open')) {
    closeSidebar();
  }
});

window.addEventListener('resize', ()=> {
  if (window.innerWidth > 768) {
    closeSidebar();
  }
});

document.addEventListener('keydown', (e)=> {
  if (e.key === 'Escape' && sidebar.classList.contains('open')) {
    closeSidebar();
  }
});

sidebarLinks.forEach(link => {
  link.addEventListener('click', (e)=> {
    sidebarLinks.forEach(l => l.classList.remove('active'));
    link.classList.add('active');
    if (window.innerWidth <= 768) {
      closeSidebar();
    }
  });
});

/* ---------- SIDEBAR DROPDOWN FUNCTIONALITY ---------- */
const dropdownToggles = $$('.sidebar-dropdown-toggle');
const dropdowns = $$('.sidebar-dropdown');
const sublinks = $$('.sidebar-sublink');

dropdownToggles.forEach(toggle => {
  toggle.addEventListener('click', (e) => {
    e.preventDefault();
    const dropdown = toggle.closest('.sidebar-dropdown');
    const isOpen = dropdown.classList.contains('open');
    dropdowns.forEach(d => {
      if (d !== dropdown) {
        d.classList.remove('open');
      }
    });
    if (isOpen) {
      dropdown.classList.remove('open');
    } else {
      dropdown.classList.add('open');
    }
  });
});

sublinks.forEach(sublink => {
  sublink.addEventListener('click', (e) => {
    sublinks.forEach(s => s.classList.remove('active'));
    sublink.classList.add('active');
    sidebarLinks.forEach(l => l.classList.remove('active'));
    if (window.innerWidth <= 768) {
      closeSidebar();
    }
  });
});

document.addEventListener('click', (e) => {
  if (!e.target.closest('.sidebar-dropdown')) {
    dropdowns.forEach(dropdown => {
      dropdown.classList.remove('open');
    });
  }
});

/* ---------- GALLERY FUNCTIONALITY (SIMPLE) ---------- */
let galleryImages = JSON.parse(localStorage.getItem('galleryImages') || '[]');

// Save image to gallery
function saveToGallery(imageUrl, prompt, provider) {
  const galleryItem = {
    id: Date.now(),
    imageUrl: imageUrl,
    prompt: prompt || 'No prompt',
    provider: provider || 'unknown',
    timestamp: new Date().toISOString(),
    date: new Date().toLocaleDateString('uz-UZ')
  };
  
  galleryImages.unshift(galleryItem); // Add to beginning
  localStorage.setItem('galleryImages', JSON.stringify(galleryImages));
}

// Test server connection
fetch('/api/test')
  .then(res => res.json())
  .then(data => console.log('✅ Server connection:', data))
  .catch(err => console.error('❌ Server connection failed:', err));

console.log('🚀 DODa AI sayti yuklandi!');
  </script>
  
  <!-- Simple Script for Free AI -->
  <script src="simple-script.js"></script>

  <!-- FOOTER SECTION -->
  <footer class="relative bg-gradient-to-br from-gray-900 via-black to-gray-900 border-t border-white/10 mt-20">
    <!-- Animated Background -->
    <div class="absolute inset-0 overflow-hidden">
      <div class="absolute -top-40 -right-40 w-80 h-80 bg-cyan-500/10 rounded-full blur-3xl animate-pulse"></div>
      <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
    </div>
    
    <div class="relative z-10 max-w-7xl mx-auto px-6 py-16">
      <!-- Main Footer Content -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
        
        <!-- Company Info -->
        <div class="space-y-6 animate-fade-in">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-gradient-to-r from-cyan-400 to-purple-500 rounded-xl flex items-center justify-center">
              <span class="text-white font-bold text-lg">D</span>
            </div>
            <span class="text-2xl font-bold bg-gradient-to-r from-cyan-400 to-purple-500 bg-clip-text text-transparent">DODa AI</span>
          </div>
          <p class="text-white/70 leading-relaxed">
            Sun'iy intellekt yordamida rasm va video yaratish platformasi. Eng zamonaviy AI texnologiyalari bilan ishlaymiz.
          </p>
          <div class="flex items-center gap-4">
            <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
            <span class="text-green-400 text-sm font-medium">24/7 Faol</span>
          </div>
        </div>

        <!-- Contact Info -->
        <div class="space-y-6 animate-fade-in" style="animation-delay: 0.2s;">
          <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
            <svg class="w-5 h-5 text-cyan-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
            </svg>
            Bog'lanish
          </h3>
          
          <!-- Phone Numbers -->
          <div class="space-y-3">
            <a href="tel:+998901234567" class="flex items-center gap-3 text-white/70 hover:text-cyan-400 transition-all duration-300 group">
              <div class="w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center group-hover:bg-cyan-500/20 transition-colors">
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                </svg>
              </div>
              <span class="font-medium">+998 (77) 001-94-48</span>
            </a>
            
            <a href="tel:+998901234568" class="flex items-center gap-3 text-white/70 hover:text-cyan-400 transition-all duration-300 group">
              <div class="w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center group-hover:bg-cyan-500/20 transition-colors">
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                </svg>
              </div>
              <span class="font-medium">+998 (99) 884-70-17</span>
            </a>
          </div>

          <!-- Email -->
          <a href="mailto:info@dodaai.uz" class="flex items-center gap-3 text-white/70 hover:text-cyan-400 transition-all duration-300 group">
            <div class="w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center group-hover:bg-cyan-500/20 transition-colors">
              <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
            </div>
            <span class="font-medium">rz4734082@gmaill.com</span>
          </a>
        </div>

        <!-- Social Media -->
        <div class="space-y-6 animate-fade-in" style="animation-delay: 0.4s;">
          <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
            <svg class="w-5 h-5 text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684m0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z" />
            </svg>
            Ijtimoiy tarmoqlar
          </h3>
          
          <div class="space-y-3">
            <!-- Telegram -->
            <a href="https://t.me/XTMMB" target="_blank" class="flex items-center gap-3 text-white/70 hover:text-blue-400 transition-all duration-300 group">
              <div class="w-10 h-10 bg-gradient-to-r from-blue-500/20 to-blue-600/20 rounded-xl flex items-center justify-center group-hover:from-blue-500/30 group-hover:to-blue-600/30 group-hover:scale-110 transition-all duration-300">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                </svg>
              </div>
              <div>
                <div class="font-medium">Telegram</div>
                <div class="text-xs text-white/50">@XTMMB</div>
              </div>
            </a>

            <!-- Instagram -->
            <a href="https://instagram.com/dodaai" target="_blank" class="flex items-center gap-3 text-white/70 hover:text-pink-400 transition-all duration-300 group">
              <div class="w-10 h-10 bg-gradient-to-r from-pink-500/20 to-purple-600/20 rounded-xl flex items-center justify-center group-hover:from-pink-500/30 group-hover:to-purple-600/30 group-hover:scale-110 transition-all duration-300">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                </svg>
              </div>
              <div>
                <div class="font-medium">Instagram</div>
                <div class="text-xs text-white/50">@dodaai</div>
              </div>
            </a>

            <!-- YouTube -->
            <a href="https://youtube.com/@dodaai" target="_blank" class="flex items-center gap-3 text-white/70 hover:text-red-400 transition-all duration-300 group">
              <div class="w-10 h-10 bg-gradient-to-r from-red-500/20 to-red-600/20 rounded-xl flex items-center justify-center group-hover:from-red-500/30 group-hover:to-red-600/30 group-hover:scale-110 transition-all duration-300">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                </svg>
              </div>
              <div>
                <div class="font-medium">YouTube</div>
                <div class="text-xs text-white/50">@dodaai</div>
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- Divider -->
      <div class="border-t border-white/10 pt-8">
        <!-- Bottom Section -->
        <div class="flex flex-col md:flex-row items-center justify-between gap-6">
          <!-- Copyright -->
          <div class="text-center md:text-left">
            <p class="text-white/60 text-sm">
              © 2024 <span class="text-cyan-400 font-semibold">DODa AI</span>. Barcha huquqlar himoyalangan.
            </p>
            <p class="text-white/40 text-xs mt-1">
              Sun'iy intellekt texnologiyalari bilan yaratilgan
            </p>
          </div>

          <!-- Stats -->
          <div class="flex items-center gap-6 text-sm">
            <div class="text-center">
              <div class="text-cyan-400 font-bold text-lg" id="userCount">1,234+</div>
              <div class="text-white/60 text-xs">Foydalanuvchi</div>
            </div>
            <div class="w-px h-8 bg-white/20"></div>
            <div class="text-center">
              <div class="text-purple-400 font-bold text-lg" id="imageCount">50,000+</div>
              <div class="text-white/60 text-xs">Yaratilgan rasm</div>
            </div>
            <div class="w-px h-8 bg-white/20"></div>
            <div class="text-center">
              <div class="text-green-400 font-bold text-lg">99.9%</div>
              <div class="text-white/60 text-xs">Uptime</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Floating Action Button -->
    <div class="fixed bottom-6 right-6 z-50">
      <button id="scrollToTop" class="w-12 h-12 bg-gradient-to-r from-cyan-500 to-purple-500 rounded-full shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-300 flex items-center justify-center text-white opacity-0 invisible">
        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
        </svg>
      </button>
    </div>
  </footer>

  <!-- Footer Animations CSS -->
  <style>
    @keyframes fade-in {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .animate-fade-in {
      animation: fade-in 0.8s ease-out forwards;
    }
    
    /* Scroll to top button functionality */
    #scrollToTop.visible {
      opacity: 1;
      visibility: visible;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      footer .grid {
        grid-template-columns: 1fr;
        gap: 2rem;
      }
      
      footer .flex {
        flex-direction: column;
        text-align: center;
      }
    }
  </style>

  <!-- Footer JavaScript -->
  <script>
    // Scroll to top functionality
    const scrollToTopBtn = document.getElementById('scrollToTop');
    
    window.addEventListener('scroll', () => {
      if (window.pageYOffset > 300) {
        scrollToTopBtn.classList.add('visible');
      } else {
        scrollToTopBtn.classList.remove('visible');
      }
    });
    
    scrollToTopBtn.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
    
    // Animate counters
    function animateCounter(element, target) {
      let current = 0;
      const increment = target / 100;
      const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
          current = target;
          clearInterval(timer);
        }
        element.textContent = Math.floor(current).toLocaleString() + '+';
      }, 20);
    }
    
    // Intersection Observer for counter animation
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const userCount = document.getElementById('userCount');
          const imageCount = document.getElementById('imageCount');
          
          if (userCount && !userCount.classList.contains('animated')) {
            userCount.classList.add('animated');
            animateCounter(userCount, 1234);
          }
          
          if (imageCount && !imageCount.classList.contains('animated')) {
            imageCount.classList.add('animated');
            animateCounter(imageCount, 50000);
          }
        }
      });
    });
    
    observer.observe(document.querySelector('footer'));
  </script>
</body>
</html>